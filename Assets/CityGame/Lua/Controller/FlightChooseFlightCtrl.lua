---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/9/21 10:35
---

FlightChooseFlightCtrl = class('FlightChooseFlightCtrl',UIPanel)
UIPanel:ResgisterOpen(FlightChooseFlightCtrl)

function FlightChooseFlightCtrl:initialize()
    UIPanel.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
end

function FlightChooseFlightCtrl:bundleName()
    return "Assets/CityGame/Resources/View/FlightChooseFlightPanel.prefab"
end

function FlightChooseFlightCtrl:OnCreate(obj)
    UIPanel.OnCreate(self, obj)
end

function FlightChooseFlightCtrl:Awake(go)
    self.gameObject = go
    local behaviour = self.gameObject:GetComponent('LuaBehaviour')
    behaviour:AddClick(FlightChooseFlightPanel.backBtn.gameObject, function ()
        self:backFunc()
    end , self)

    self.scrollEvent = VScrollEventData.New()
    self.scrollEvent.mProvideData = FlightChooseFlightCtrl.static.ProvideFunc
    self.scrollEvent.mClearData = FlightChooseFlightCtrl.static.ClearFunc
    FlightChooseFlightPanel.scrollLoop:InitComponent(self.scrollEvent)
end
--
FlightChooseFlightCtrl.static.ProvideFunc = function(transform, idx)
    idx = idx + 1
    local item = ChooseFlightItem:new(transform, FlightChooseFlightCtrl.listValue[idx])
    FlightChooseFlightCtrl.static.itemsList[idx] = item
end
--
FlightChooseFlightCtrl.static.ClearFunc = function(transform) end
--
function FlightChooseFlightCtrl:Refresh()
    self:_initData()
end
--
function FlightChooseFlightCtrl:Active()
    UIPanel.Active(self)
    self:_language()
end
--
function FlightChooseFlightCtrl:Hide()
    UIPanel.Hide(self)
end
--
function FlightChooseFlightCtrl:_initData()
    local temp = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30}
    FlightChooseFlightCtrl.static.itemsList = {}
    FlightChooseFlightCtrl.listValue = temp
    FlightChooseFlightPanel.scrollLoop:InitData(#temp)

    --if self.m_data ~= nil then
    --    FlightChooseFlightCtrl.listValue = self.m_data.valueList
    --    FlightChooseFlightPanel.scrollLoop:InitData(#self.m_data.valueList)
    --end
end
--
function FlightChooseFlightCtrl:cleanItemList()
    if FlightChooseFlightCtrl.static.itemsList == nil then
        return
    end
    for i, value in pairs(FlightChooseFlightCtrl.static.itemsList) do
        value:Close()
    end
end
--
function FlightChooseFlightCtrl:_language()
    FlightChooseFlightPanel.titleText01.text = GetLanguage(32020005)
    FlightChooseFlightPanel.valueText02.text = GetLanguage(32020006)
    FlightChooseFlightPanel.valueText03.text = GetLanguage(32020007)
    FlightChooseFlightPanel.valueText04.text = GetLanguage(32020008)
    FlightChooseFlightPanel.valueText05.text = GetLanguage(32020009)
    FlightChooseFlightPanel.valueText06.text = GetLanguage(32020010)
    FlightChooseFlightPanel.valueText07.text = GetLanguage(32020011)
end
--
function FlightChooseFlightCtrl:backFunc()
    self:cleanItemList()
    PlayMusEff(1002)
    UIPanel.ClosePage()
end