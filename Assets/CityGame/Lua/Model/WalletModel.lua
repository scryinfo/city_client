---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Fisher.
--- DateTime: 2019/6/19 11:41
---
WalletModel = class("WalletModel",ModelBase)

local pbl = pbl
function WalletModel:initialize(insId)
    self.insId = insId
    self:OnCreate()
end

function WalletModel:OnCreate()
    --本地事件
    Event.AddListener("ReqCreateWallet",self.ReqCreateWalletm,self)

    --网络事件
    DataManager.ModelRegisterNetMsg(nil,"gscode.OpCode","ct_createUser","ccapi.ct_createUser",self.ReceiveCreateWallet,self)

end

function WalletModel:Close()
    --本地事件
    Event.RemoveListener("ReqCreateWallet",self.ReqCreateWalletm,self)
end

---客户端请求----
--创建钱包
function WalletModel:ReqCreateWallet(userId,userName,pubKey)
    local msgId = pbl.enum("gscode.OpCode","ct_createUser")
    local lMsg = {PlayerId = userId,CreateUserReq={ReqHeader = {Version = 1,ReqId = tostring(msgId)}},CityUserName = userName,PubKey = pubKey}
    local pMsg = assert(pbl.encode("ccapi.ct_createUser", lMsg))
    --local msgRet = assert(pbl.decode("ccapi.ct_createUser",pMsg), "pbl.decode decode failed")
    CityEngineLua.Bundle:newAndSendMsg(msgId, pMsg)
end

---服务器回调---
--创建钱包
function WalletModel:ReceiveCreateWallet(data)
    local aaa = data
end
