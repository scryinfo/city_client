---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/7/23 18:00
---

ResearchDatabasePart = class("ResearchDatabasePart", BasePart)

function ResearchDatabasePart:PrefabName()
    return "ResearchDatabasePart"
end

function ResearchDatabasePart:GetDetailClass()
    return ResearchDatabaseDetailPart
end

function ResearchDatabasePart:_InitTransform()
    local transform = self.transform
    self.text = transform:Find("Top/Text"):GetComponent("Text")
    self.achievementsNumText = transform:Find("Top/AchievementsNumText"):GetComponent("Text")
end

function  ResearchDatabasePart:_ResetTransform()
    Event.RemoveListener("part_UserData",self.UserData,self)
end

function ResearchDatabasePart:_InitChildClick(mainPanelLuaBehaviour)
    Event.AddListener("part_UserData",self.UserData,self)
end


function ResearchDatabasePart:Refresh(data)
    --刷新自身数据,不刷新详情页面数据
    self:RefreshData(data)
end

function ResearchDatabasePart:RefreshData(data)
    self.m_data = data
    self.text.text = "Achievements:"
    self.achievementsNumText.text = data.storeNum
end

--使用点数回调
function ResearchDatabasePart:UserData(info)
    self.m_data.storeNum = self.m_data.storeNum - info.num
    self.achievementsNumText.text = self.m_data.storeNum
end