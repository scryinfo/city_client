---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2019/7/20 15:16
---公司流水ctrl
CompanyWaterCtrl = class('CompanyWaterCtrl',UIPanel)
UIPanel:ResgisterOpen(CompanyWaterCtrl)
CompanyWaterCtrl.static.PATH = "Assets/CityGame/Resources/View/GoodsItem/CompanyBuildingItem.prefab";

local companyWaterBehaviour;

function  CompanyWaterCtrl:bundleName()
    return "Assets/CityGame/Resources/View/CompanyWaterPanel.prefab"
end

function CompanyWaterCtrl:initialize()
    UIPanel.initialize(self,UIType.Normal,UIMode.HideOther,UICollider.None)--可以回退，UI打开后，隐藏其它面板
end

function CompanyWaterCtrl:Awake()
    self.insId = OpenModelInsID.CompanyWaterCtrl
    self.income = true
    companyWaterBehaviour = self.gameObject:GetComponent('LuaBehaviour');
    companyWaterBehaviour:AddClick(CompanyWaterPanel.backBtn,self.c_OnBack,self);
    companyWaterBehaviour:AddClick(CompanyWaterPanel.incomeBg,self.c_OnIncomeBg,self);
    companyWaterBehaviour:AddClick(CompanyWaterPanel.expendBg,self.c_OnExpendBg,self);

    CompanyWaterPanel.income.text = GetLanguage(19020008)   --收入
    CompanyWaterPanel.expend.text = GetLanguage(19020010)   --支出
    self.buildingItem = {}
    for i, v in ipairs(CompanyWaterConfig) do
        local function callback(prefab)
            self.buildingItem[i] = CompanyBuildingItem:new(companyWaterBehaviour,prefab,v)
            if i == 1 then
                self.buildingItem[1]:OnBg(self.buildingItem[1])
            end
        end
        createPrefab(CompanyWaterCtrl.static.PATH,CompanyWaterPanel.buildingContent, callback)
    end

end

function CompanyWaterCtrl:Active()
    UIPanel.Active(self)

end

function CompanyWaterCtrl:Refresh()

end

function CompanyWaterCtrl:Hide()
    UIPanel.Hide(self)
end

--返回
function CompanyWaterCtrl:c_OnBack()
    UIPanel.ClosePage()
end

function CompanyWaterCtrl:c_OnIncomeBg()
    CompanyWaterPanel.expendBg.transform.localScale = Vector3.one
    CompanyWaterPanel.incomeBg:GetComponent("Button").enable = false
end

function CompanyWaterCtrl:c_OnExpendBg(go)
    go.income = not go.income
    if go.income then
        CompanyWaterPanel.income.text = GetLanguage(19020008)   --收入
        CompanyWaterPanel.expend.text = GetLanguage(19020010)   --支出
    else
        CompanyWaterPanel.income.text = GetLanguage(19020010)   --支出
        CompanyWaterPanel.expend.text = GetLanguage(19020008)   --收入
    end
    CompanyWaterPanel.expendBg.transform.localScale = Vector3.zero
    CompanyWaterPanel.incomeBg:GetComponent("Button").enable = true
end
