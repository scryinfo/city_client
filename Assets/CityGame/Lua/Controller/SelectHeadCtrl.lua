---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2019/1/12 16:15
---头像选择ctrl
SelectHeadCtrl = class('SelectHeadCtrl',UIPage)
UIPage:ResgisterOpen(SelectHeadCtrl)
SelectHeadCtrl.static.Head_PATH = "View/GoodsItem/RoleHeadItem"

local selectHeadBehaviour;
local gameObject;
local headId = nil

function  SelectHeadCtrl:bundleName()
    return "Assets/CityGame/Resources/View/SelectHeadPanel.prefab"
end

function SelectHeadCtrl:initialize()
    --UIPage.initialize(self,UIType.Normal,UIMode.HideOther,UICollider.None)--可以回退，UI打开后，隐藏其它面板
    UIPage.initialize(self,UIType.Normal,UIMode.NeedBack,UICollider.None)--可以回退，UI打开后，不隐藏其它的UI
end

function SelectHeadCtrl:OnCreate(obj)
    UIPage.OnCreate(self,obj)
    selectHeadBehaviour = self.gameObject:GetComponent('LuaBehaviour')
    selectHeadBehaviour:AddClick(SelectHeadPanel.okBtn,self.OnOkBtn,self)
    self.initData()
end

--初始化
function SelectHeadCtrl:initData()
    for i, v in ipairs(PlayerHead) do
        local prefab = creatGoods(SelectHeadCtrl.static.Head_PATH,SelectHeadPanel.content)
        local roleHeadItem = RoleHeadItem:new(prefab,v.SelectRolePath,i)
    end
end

--点击确定
function SelectHeadCtrl:OnOkBtn(go)
    if headId ~= nil then
        local data = go.m_data
        data.faceId = headId
        Event.Brocast("m_createNewRole",data)
    else
        Event.Brocast("SmallPop"," 请选择头像",300)
    end
end

function SelectHeadCtrl:SetHeadId(id)
    headId = id
end
