---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/10/15 17:16
---交易所
ExchangeTitleType =
{
    Quotes = 1,
    Collect = 2,
    Record = 3,
}

require('Framework/UI/UIPage')
local class = require 'Framework/class'

ExchangeCtrl = class('ExchangeCtrl',UIPage)

function ExchangeCtrl:initialize()
    UIPage.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
end

function ExchangeCtrl:bundleName()
    return "Exchange"
end

function ExchangeCtrl:OnCreate(obj)
    UIPage.OnCreate(self, obj)
end

function ExchangeCtrl:Awake(go)
    self.gameObject = go
    --local luaBehaviour = self.gameObject:GetComponent('LuaBehaviour');
    --luaBehaviour:AddClick(ExchangePanel.backBtn.gameObject, self._backBtn, self);

    self.titleType = ExchangeTitleType.Quotes  --默认打开行情
    self.sortMgr = ExchangeSortMgr:new(ExchangePanel.titleRoot)

    --行情收藏记录toggle
    ExchangePanel.quotesToggle.onValueChanged:AddListener(function (isOn)
        self:_quotesToggleValueChange(isOn)
    end)
    ExchangePanel.collectToggle.onValueChanged:AddListener(function (isOn)
        self:_collectToggleValueChange(isOn)
    end)
    ExchangePanel.recordToggle.onValueChanged:AddListener(function (isOn)
        self:_recordToggleValueChange(isOn)
    end)

    self:_initTitleToggle()
end

function ExchangeCtrl:Close()
    ExchangePanel.quotesToggle.onValueChanged:RemoveAllListeners();
    ExchangePanel.collectToggle.onValueChanged:RemoveAllListeners();
    ExchangePanel.recordToggle.onValueChanged:RemoveAllListeners();
end

function ExchangeCtrl:_initTitleToggle()
    ExchangePanel._quotesToggleState(true)
    ExchangePanel._collectToggleState(false)
    ExchangePanel._recordToggleState(false)
    ExchangePanel.recordPage.localScale = Vector3.zero


end

function ExchangeCtrl:_quotesToggleValueChange(isOn)
    if isOn then
        if self.titleType ~= ExchangeTitleType.Quotes then
            --判断是否有数据，没有的话，就显示提示 text
            --打开详情界面

            ExchangePanel._quotesToggleState(isOn)
            self.titleType = ExchangeTitleType.Quotes
            ExchangePanel.quotesAndCollectPage.localScale = Vector3.one
        end
    else
        if self.titleType == ExchangeTitleType.Quotes then
            ExchangePanel._quotesToggleState(isOn)
            ExchangePanel.quotesAndCollectPage.localScale = Vector3.zero
        end
    end
end
function ExchangeCtrl:_collectToggleValueChange(isOn)
    if isOn then
        if self.titleType ~= ExchangeTitleType.Collect then
            --判断是否有数据，没有的话，就显示提示 text
            --打开详情界面

            ExchangePanel._collectToggleState(isOn)
            self.titleType = ExchangeTitleType.Collect
            ExchangePanel.quotesAndCollectPage.localScale = Vector3.one
        end
    else
        if self.titleType == ExchangeTitleType.Collect then
            ExchangePanel._collectToggleState(isOn)
            ExchangePanel.quotesAndCollectPage.localScale = Vector3.zero
        end
    end
end
function ExchangeCtrl:_recordToggleValueChange(isOn)
    if isOn then
        if self.titleType ~= ExchangeTitleType.Record then
            --判断是否有数据，没有的话，就显示提示 text
            --打开详情界面

            ExchangePanel._recordToggleState(isOn)
            self.titleType = ExchangeTitleType.Record
            ExchangePanel.recordPage.localScale = Vector3.one
        end
    else
        if self.titleType == ExchangeTitleType.Record then
            ExchangePanel._recordToggleState(isOn)
            ExchangePanel.recordPage.localScale = Vector3.zero
        end
    end
end

function ExchangeCtrl:_tempDataTest()

end

