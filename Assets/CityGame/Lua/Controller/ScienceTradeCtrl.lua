---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/10/25/025 17:47
---


require "Common/define"

require('Framework/UI/UIPage')

local class = require 'Framework/class'
ScienceTradeCtrl = class('ScienceTradeCtrl',UIPage)
UIPage:ResgisterOpen(ScienceTradeCtrl) --注册打开的方法

---构建函数
function ScienceTradeCtrl:initialize()
    UIPage.initialize(self,UIType.Normal,UIMode.HideOther,UICollider.None);
end

function ScienceTradeCtrl:bundleName()
    return "ScienceTradePanel";
end

function ScienceTradeCtrl:OnCreate(obj)
    UIPage.OnCreate(self,obj);
end

local panel
local Mgr
local data={itemId=0}
local materialBehaviour
function ScienceTradeCtrl:Awake(go)
    self.gameObject = go;
    Mgr=ScienceSellHallModel.Mgr
    panel=ScienceTradePanel
    materialBehaviour = self.gameObject:GetComponent('LuaBehaviour');
    materialBehaviour:AddClick(panel.backBtn.gameObject,self.OnClick_backBtn,self);
    materialBehaviour:AddClick(panel.plusBtn.gameObject,self.OnClick_search,self);

    for i = 1, 2 do
     self:CreatedSciencetradeItem()
    end

    local data1={itemId=50}
    for i = 1, 2 do
        Mgr:creatSciencetradeItem2(materialBehaviour,data1)
        data1.itemId=data1.itemId+1
    end
end


function ScienceTradeCtrl:Refresh()
    ---name
    panel.nameText.text=self.m_data.prefabData.name
end

--返回
function ScienceTradeCtrl:OnClick_backBtn()
    UIPage.ClosePage();
end

--搜索
function ScienceTradeCtrl:OnClick_search(Ins)
   ct.OpenCtrl("ScienceSellPopCtrl",Ins)
end

function ScienceTradeCtrl:CreatedSciencetradeItem()
    Mgr:creatSciencetradeItem(materialBehaviour,data)
    data.itemId=data.itemId+1
end
