---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/9/19 17:03
---

local class = require 'Framework/class'

OccupancyRateItem = class('OccupancyRateItem')

--初始化方法
function OccupancyRateItem:initialize(clickOpenFunc, viewRect, mainPanelLuaBehaviour)
    self.viewRect = viewRect

    self.openStateTran = self.view.transform:Find("topRoot/open");  --打开状态
    self.closeStateTran = self.view.transform:Find("topRoot/close");  --关闭状态
    self.openBtn = self.view.transform:Find("topRoot/close/openBtn");  --打开按钮
    self.occupancySlider = self.view.transform:Find("contentRoot/occupancySlider"):GetComponent("Slider");  -- slider
    self.occupancyText = self.view.transform:Find("contentRoot/Text"):GetComponent("Text");  -- slider显示的值

    mainPanelLuaBehaviour:AddClick(self.openBtn.gameObject, clickOpenFunc);
end

--打开
function OccupancyRateItem:OpenToggleItem(targetMovePos)
    self.BuildingInfoToggleState = BuildingInfoToggleState.Open
    self.targetMovePos = targetMovePos

    self.openStateTran.localScale = Vector3.one
    self.closeStateTran.localScale = Vector3.zero

    self.contentRoot.localScale = Vector3.one --打开显示内容
    self.viewRect.anchoredPosition = targetMovePos  --移动到目标位置
end

--关闭
function OccupancyRateItem:CloseToggleItem(targetMovePos)
    self.BuildingInfoToggleState = BuildingInfoToggleState.Close
    self.targetMovePos = targetMovePos

    self.openStateTran.localScale = Vector3.zero
    self.closeStateTran.localScale = Vector3.one

    self.contentRoot.localScale = Vector3.zero --打开显示内容
    self.viewRect.anchoredPosition = targetMovePos  --移动到目标位置

end


active_TestGroup("cycle_w5")

UnitTest("cycle_w5", "test_loginctrl_tempTest",  function ()
    log("cycle_w5","[test_loginctrl_tempTest]  测试完毕")
end)