---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2018/11/21 14:54
---server list
local class = require 'Framework/class'
require('Framework/UI/UIPage')
ServerItem = class('ServerItem')

--Initialization method data (read configuration table)
function ServerItem:initialize(inluabehaviour, prefab, mgr, goodsDataInfo ,id)
    self.prefab = prefab;
    self.goodsDataInfo = goodsDataInfo;
    self._luabehaviour = inluabehaviour
    self.manager = mgr
    self.id = id
    self.createTime = goodsDataInfo.createTime

    self.serverBtn = self.prefab.transform.gameObject;
    self.bg = self.prefab.transform:Find("bg").gameObject:GetComponent("Image");
    self.tag = self.prefab.transform:Find("tag");
    self.notOpen = self.prefab.transform:Find("notOpen");
    self.notOpenText = self.prefab.transform:Find("notOpen/Text").gameObject:GetComponent("Text");
    self.serverName = self.prefab.transform:Find("ServerName").gameObject:GetComponent("Text");
    self.notOpenText.text = GetLanguage(11030006)
    if not goodsDataInfo.available  then
        self.notOpen.localScale = Vector3.one
        self.serverBtn:GetComponent("Button").enabled = false
    else
        self.notOpen.localScale = Vector3.zero
        self.serverBtn:GetComponent("Button").enabled = true
    end
    self.tag.localScale = Vector3.zero
    if goodsDataInfo.name == "ChengDu" then
        self.serverName.text = GetLanguage(10050002)
        LoadSprite("Assets/CityGame/Resources/Atlas/ServerList/pic-chengdu.png",self.bg)
    elseif goodsDataInfo.name == "NewYork" then
        LoadSprite("Assets/CityGame/Resources/Atlas/ServerList/NewYork.png",self.bg)
    elseif goodsDataInfo.name == "Paris" then
        LoadSprite("Assets/CityGame/Resources/Atlas/ServerList/Paris.png",self.bg)
    elseif goodsDataInfo.name == "Tokyo" then
        self.serverName.text = GetLanguage(10050003)
        LoadSprite("Assets/CityGame/Resources/Atlas/ServerList/Tokyo.png",self.bg)
    else
        self.serverName.text = goodsDataInfo.name
    end
    self._luabehaviour:AddClick(self.serverBtn, self.OnServerBtn, self);

end

function ServerItem:OnServerBtn(go)
    PlayMusEff(1002)
    Event.Brocast("c_OnServer",go)
    DataManager.SetServerCreateTs(go.createTime)
end