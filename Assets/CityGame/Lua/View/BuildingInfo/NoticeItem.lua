---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2018/11/13 15:33
---通知信息
local class = require 'Framework/class'
require('Framework/UI/UIPage')
NoticeItem = class('NoticeItem')

--初始化方法   数据（读配置表）
function NoticeItem:initialize(goodsDataInfo,prefab,inluabehaviour, mgr, id,typeId)
    self.prefab = prefab;
    self.goodsDataInfo = goodsDataInfo;
    self._luabehaviour = inluabehaviour
    self.state = goodsDataInfo.state
    self.manager = mgr
    self.id = id
    self.typeId = typeId

    self.itemHedaer = self.prefab.transform:Find("bg/hedaer").gameObject:GetComponent("Text");
    self.from = self.prefab.transform:Find("bg/from").gameObject:GetComponent("Text");
    self.itemTime = self.prefab.transform:Find("bg/time").gameObject:GetComponent("Text");
    self.hint = self.prefab.transform:Find("hint")
    self.onBg = self.prefab.transform:Find("bg").gameObject;
    self.newBg = self.prefab.transform:Find("newBg").gameObject;
    self.newHedaer = self.prefab.transform:Find("newBg/newHedaer").gameObject:GetComponent("Text");
    self.newFrom = self.prefab.transform:Find("newBg/newFrom").gameObject:GetComponent("Text");
    self.newTime = self.prefab.transform:Find("newBg/newTime").gameObject:GetComponent("Text");

    self.itemHedaer.text = goodsDataInfo.header
    self.from.text = goodsDataInfo.from
    self.itemTime.text = os.date("%Y-%m-%d %H:%M:%S");
    self.newHedaer.text = goodsDataInfo.header
    self.newFrom.text = goodsDataInfo.from
    self.newTime.text = self.itemTime.text
    self.from.text = goodsDataInfo.from

    --是否显示红点
    if goodsDataInfo.state then
        self.hint.localScale = Vector3.zero
    else
        self.hint.localScale = Vector3.one
    end

    self.newBg:SetActive(false)
    GameNoticePanel.GoodsScrollView:SetActive(false)

    self._luabehaviour:AddClick(self.onBg, self.OnBg, self);

end

function NoticeItem:OnBg(go)
    Event.Brocast("c_onBg",go)
end

function NoticeItem:RefreshID(id)
    self.id = id
end
