---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2018/12/14 10:06
---

ChatModel = class("ChatModel",ModelBase)

function ChatModel:initialize(insId)
    self.insId = insId
    self:OnCreate()
end

function ChatModel:OnCreate()
    -- Registration issue


    Event.AddListener("m_RoleCommunication", self.m_RoleCommunication)
    Event.AddListener("m_ChatAddFriends", self.m_ChatAddFriends)
    Event.AddListener("m_ChatAddBlacklist", self.m_ChatAddBlacklist)

    -- Network callback registration
    DataManager.ModelRegisterNetMsg(nil,"gscode.OpCode","addBlacklist","gs.RoleInfo", self.n_OnReceiveAddBlacklist, self)
end

function ChatModel.Close()
    -- Clear event
end



-- Send chat messages to the server
function ChatModel.m_RoleCommunication(chatData)
    DataManager.ModelSendNetMes("gscode.OpCode", "roleCommunication","gs.CommunicationReq",chatData)
end

-- Send a friend to the server
function ChatModel.m_ChatAddFriends(chatAddFriendsData)
    DataManager.ModelSendNetMes("gscode.OpCode", "addFriend","gs.ByteStr",chatAddFriendsData)
end

-- Send blacklist to server
function ChatModel.m_ChatAddBlacklist(friendsId)
    DataManager.ModelSendNetMes("gscode.OpCode", "addBlacklist","gs.Id",friendsId)
end

-- The server returns after adding the blacklist successfully
function ChatModel:n_OnReceiveAddBlacklist(roleInfo)
    Event.Brocast("c_OnReceiveAddBlacklist", roleInfo)
end