---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/2/21 16:42
---

GuildMessageItem = class("GuildMessageItem")
GuildMessageItem.static.NORMAL_COLOR = "#393939"  -- Normal color
GuildMessageItem.static.NAME_COLOR = "#f4c563"  -- Color of name

function GuildMessageItem:initialize(prefab, data)
    self.prefab = prefab
    self.data = data

    local transform = prefab.transform
    self.describeText = transform:Find("DescribeText"):GetComponent("Text")
    self.timeText = transform:Find("TimeText"):GetComponent("Text")


    local timeTab = getFormatUnixTime(self.data.createTs/1000)
    self.timeText.text = string.format("%s/%s/%s", timeTab.day, timeTab.month, timeTab.year)


    if data.type == "JOIN_SOCIETY" then
        ---str = data.createId .. "Agree" .. data.affectedId .. "Joined Business Alliance"
        PlayerInfoManger.GetInfos({data.createId, data.affectedId}, self._showNameHead, self)
    elseif data.type == "EXIT_SOCIETY" then
        --str = data.createId .. "Exited the business alliance"
        PlayerInfoManger.GetInfos({data.createId}, self._showNameHead, self)
    elseif data.type == "CREATE_SOCIETY" then
        --str = data.createId .. "Created business alliance"
        PlayerInfoManger.GetInfos({data.createId}, self._showNameHead, self)
    elseif data.type == "KICK_OUT_SOCIETY" then
        --str = data.affectedId .. "was" .. data.createId .. "kicked out of the business alliance"
        PlayerInfoManger.GetInfos({data.affectedId, data.createId}, self._showNameHead, self)
    elseif data.type == "APPOINT_TO_MEMBER" then
        --str = data.affectedId .. "was" .. data.createId .. "appoint as member"
        PlayerInfoManger.GetInfos({data.affectedId, data.createId}, self._showNameHead, self)
    elseif data.type == "APPOINT_TO_CHAIRMAN" then
        --str = data.affectedId .. "was" .. data.createId .. "appoint as chairman"
        PlayerInfoManger.GetInfos({data.affectedId, data.createId}, self._showNameHead, self)
    elseif data.type == "APPOINT_TO_VICE_CHAIRMAN" then
        --str = data.affectedId .. "was" .. data.createId .. "appointed as vice president"
        PlayerInfoManger.GetInfos({data.affectedId, data.createId}, self._showNameHead, self)
    elseif data.type == "APPOINT_TO_ADMINISTRATOR" then
       --str = data.affectedId .. "was" .. data.createId .. "appoint as admin"
        PlayerInfoManger.GetInfos({data.affectedId, data.createId}, self._showNameHead, self)
    elseif data.type == "MODIFY_NAME" then
       --str = data.createId .. "The alliance name has been modified"
        PlayerInfoManger.GetInfos({data.createId}, self._showNameHead, self)
    elseif data.type == "MODIFY_DECLARATION" then
       --str = data.createId .. "modified business declaration"
        PlayerInfoManger.GetInfos({data.createId}, self._showNameHead, self)
    elseif data.type == "MODIFY_INTRODUCTION" then
        --str = data.createId .. "modified business introduction"
        PlayerInfoManger.GetInfos({data.createId}, self._showNameHead, self)
    end
end

--Display member information
function GuildMessageItem:_showNameHead(playerData)
    local str = "1111"
    local data = self.data

    if data.type == "JOIN_SOCIETY" then
        str = GetLanguage(12040017, playerData[1].name, playerData[2].name)
     --str = playerData[1].name .. "Agree" .. playerData[2].name .. "Joined a business alliance"
        --str = string.format("<color=%s>%s</color><color=%s>同意</color><color=%s>%s</color><color=%s>加入了商业联盟</color>", GuildMessageItem.static.NAME_COLOR, playerData[1].name, GuildMessageItem.static.NORMAL_COLOR, GuildMessageItem.static.NAME_COLOR, playerData[2].name, GuildMessageItem.static.NORMAL_COLOR)
    elseif data.type == "EXIT_SOCIETY" then
        str = GetLanguage(12040018, playerData[1].name)
        --str = playerData[1].name .. "Quit from the business alliance"
    elseif data.type == "CREATE_SOCIETY" then
        str = GetLanguage(12040004, playerData[1].name)
        ---str = playerData[1].name .. "Created a business alliance"
    elseif data.type == "KICK_OUT_SOCIETY" then
        str = GetLanguage(12040005, playerData[1].name, playerData[2].name)
        --str = playerData[1].name .. "was" .. playerData[2].name .. "kicked out of the business alliance"
    elseif data.type == "APPOINT_TO_MEMBER" then
        str = GetLanguage(12040009, playerData[1].name, playerData[2].name)
       --str = playerData[1].name .. "was" .. playerData[2].name .. "appointed as a member"
    elseif data.type == "APPOINT_TO_CHAIRMAN" then
        str = GetLanguage(12040006, playerData[1].name, playerData[2].name)
        str = playerData[1].name .. "被" .. playerData[2].name .. "任命为会长"
    elseif data.type == "APPOINT_TO_VICE_CHAIRMAN" then
        str = GetLanguage(12040007, playerData[1].name, playerData[2].name)
        --str = playerData[1].name .. "was" .. playerData[2].name .. "appointed as vice president"
    elseif data.type == "APPOINT_TO_ADMINISTRATOR" then
        str = GetLanguage(12040008, playerData[1].name, playerData[2].name)
        --str = playerData[1].name .. "was" .. playerData[2].name .. "appointed as management"
    elseif data.type == "MODIFY_NAME" then
        str = GetLanguage(12040010, playerData[1].name)
        --str = playerData[1].name .. "The alliance name has been modified"
    elseif data.type == "MODIFY_DECLARATION" then
        str = GetLanguage(12040011, playerData[1].name)
     --str = playerData[1].name .. "modified business declaration"
    elseif data.type == "MODIFY_INTRODUCTION" then
        str = GetLanguage(12040012, playerData[1].name)
        --str = playerData[1].name .. "modified business introduction"
    end
    self.describeText.text = str
end