---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/10/16 11:05
---管理行情&收藏界面的排序
ExchangeSortItemType =
{
    Name = 1,
    Change = 2,
    High = 3,
    Low = 4,
    LastPrice = 5,
    Volume = 6,
}

local class = require 'Framework/class'

ExchangeSortMgr = class('ExchangeSortMgr')

--初始化方法
function ExchangeSortMgr:initialize(transform)
    self.transform = transform;
    self.sortItemType = ExchangeSortItemType.Name

    self.nameToggle = transform:Find("nameToggle"):GetComponent("Toggle");
    self.nameToggleItem = ExchangeSortItem:new(self.nameToggle.transform)
    self.changeToggle = transform:Find("change"):GetComponent("Toggle");
    self.changeToggleItem = ExchangeSortItem:new(self.changeToggle.transform)
    self.highToggle = transform:Find("high"):GetComponent("Toggle");
    self.highToggleItem = ExchangeSortItem:new(self.highToggle.transform)
    self.lowToggle = transform:Find("low"):GetComponent("Toggle");
    self.lowToggleItem = ExchangeSortItem:new(self.lowToggle.transform)
    self.lastPriceToggle = transform:Find("lastPrice"):GetComponent("Toggle");
    self.lastPriceToggleItem = ExchangeSortItem:new(self.lastPriceToggle.transform)
    self.volumeToggle = transform:Find("volume"):GetComponent("Toggle");
    self.volumeToggleItem = ExchangeSortItem:new(self.volumeToggle.transform)

    self.nameToggle.onValueChanged:AddListener(function (isOn)
        self:_nameToggleValueChange(isOn)
    end)
    self.changeToggle.onValueChanged:AddListener(function (isOn)
        self:_changeToggleValueChange(isOn)
    end)
    self.highToggle.onValueChanged:AddListener(function (isOn)
        self:_highToggleValueChange(isOn)
    end)
    self.lowToggle.onValueChanged:AddListener(function (isOn)
        self:_lowToggleValueChange(isOn)
    end)
    self.lastPriceToggle.onValueChanged:AddListener(function (isOn)
        self:_lastPriceToggleValueChange(isOn)
    end)
    self.volumeToggle.onValueChanged:AddListener(function (isOn)
        self:_volumeToggleValueChange(isOn)
    end)
end

---行情排序toggle
--name
function ExchangeSortMgr:_nameToggleValueChange(isOn)
    if isOn then
        if self.sortItemType ~= ExchangeSortItemType.Name then
            self.nameToggleItem:BiggerShow()
            self.nameSmaller = true
            self.sortItemType = ExchangeSortItemType.Name
        else
            if self.nameSmaller then
                self.nameToggleItem:SmallerShow()
                self.nameSmaller = false
            else
                self.nameToggleItem:BiggerShow()
                self.nameSmaller = true
            end
        end
    else
        if self.sortItemType == ExchangeSortItemType.Name then
            self.nameToggleItem:CommonShow()
        end
    end
end
--change
function ExchangeSortMgr:_changeToggleValueChange(isOn)
    if isOn then
        if self.sortItemType ~= ExchangeSortItemType.Change then
            self.changeToggleItem:BiggerShow()
            self.changeSmaller = true
            self.sortItemType = ExchangeSortItemType.Change
        else
            if self.changeSmaller then
                self.changeToggleItem:SmallerShow()
                self.changeSmaller = false
            else
                self.changeToggleItem:BiggerShow()
                self.changeSmaller = true
            end
        end
    else
        if self.sortItemType == ExchangeSortItemType.Change then
            self.changeToggleItem:CommonShow()
        end
    end
end
--high
function ExchangeSortMgr:_highToggleValueChange(isOn)
    if isOn then
        if self.sortItemType ~= ExchangeSortItemType.High then
            self.highToggleItem:BiggerShow()
            self.highSmaller = true
            self.sortItemType = ExchangeSortItemType.High
        else
            if self.highSmaller then
                self.highToggleItem:SmallerShow()
                self.highSmaller = false
            else
                self.highToggleItem:BiggerShow()
                self.highSmaller = true
            end
        end
    else
        if self.sortItemType == ExchangeSortItemType.High then
            self.highToggleItem:CommonShow()
        end
    end
end
--low
function ExchangeSortMgr:_lowToggleValueChange(isOn)
end
--lastPrice
function ExchangeSortMgr:_lastPriceToggleValueChange(isOn)
end
--volume
function ExchangeSortMgr:_volumeToggleValueChange(isOn)
end

---默认排序时的显示
function ExchangeSortMgr:_commonShow()
    self.upRoot.localScale = Vector3.one
    self.downRoot.localScale = Vector3.one

    self.upRed.localScale = Vector3.zero
    self.downRed.localScale = Vector3.zero
end
---由小到大
function ExchangeSortMgr:BiggerShow()
    self.upRoot.localScale = Vector3.one
    self.upRed.localScale = Vector3.one
    self.downRoot.localScale = Vector3.zero
end
---由大到小
function ExchangeSortMgr:SmallerShow()
    self.upRoot.localScale = Vector3.zero
    self.downRoot.localScale = Vector3.one
    self.downRed.localScale = Vector3.one
end


