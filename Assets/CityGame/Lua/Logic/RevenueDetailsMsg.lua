---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2019/3/23 11:24
---营收管理器
RevenueDetailsMsg = {}
local BuildingId
local time = 10
local this = RevenueDetailsMsg

function RevenueDetailsMsg.Awake()
    RevenueDetailsMsg.InitialNetMessages()
    --初始化循环参数
    this.intTime = 1
    this.m_Timer = Timer.New(slot(this.Updata, this), 1, -1, true)
end

function RevenueDetailsMsg.InitialNetMessages()
    --DataManager.ModelRegisterNetMsg(nil,"gscode.OpCode","addBuilding","gs.BuildingInfo",DataManager.n_OnReceiveAddBuilding)
end

--更新
function RevenueDetailsMsg:Updata()
    time = time - 1
    if time <= 0 then
        time = 10
        DataManager.ModelSendNetMes("gscode.OpCode", "getPrivateBuildingCommonInfo","gs.Bytes",{ids = {BuildingId}})
    end
end

--关闭界面后调用
function RevenueDetailsMsg.close()
    BuildingId = nil
    time = 10
    if this.m_Timer ~= nil then
        this.m_Timer:Stop()
    end
end

--向服务器发送营收详情请求
--今日营收
function RevenueDetailsMsg.m_getPrivateBuildingCommonInfo(buildingId)
    BuildingId = buildingId
    this.m_Timer:Start()
    DataManager.ModelSendNetMes("gscode.OpCode", "getPrivateBuildingCommonInfo","gs.Bytes",{ids = {buildingId}})
end

function RevenueDetailsMsg.GetRevenueDetails(budiling)
    --DataManager.ModelSendNetMes("gscode.OpCode", "queryPlayerInfo","gs.Bytes",{ ids = friendsIds })
end


--------------------------------------------------------

--服务器回调

--今日营收
function RevenueDetailsMsg.GetPrivateBuildingCommonInfo(info)
    Event.Brocast("c_Revenue",info)
end

function RevenueDetailsMsg:n_RevenueDetails()

end