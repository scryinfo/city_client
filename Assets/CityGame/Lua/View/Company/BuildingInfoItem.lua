---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/3/30 11:07
---

BuildingInfoItem = class("BuildingInfoItem")

-- 初始化
function BuildingInfoItem:initialize(prefab, data)
    self.prefab = prefab
    self.data = data

    local transform = prefab.transform

    self.nameText = transform:Find("NameText"):GetComponent("Text")
    self.sizeText = transform:Find("SizeText"):GetComponent("Text")
    self.gradeText = transform:Find("GradeImage/GradeText"):GetComponent("Text")

    self.goBtn = transform:Find("GoBtn"):GetComponent("Button")

    self.goBtn.onClick:RemoveAllListeners()
    self.goBtn.onClick:AddListener(function ()
        self:_goPos()
    end)

    self.nameText.text = data.name
    self.sizeText.text = data.mId
    self.gradeText.text = "零售店评分：" .. data.score
end

-- 跳转到场景
function BuildingInfoItem:_goPos()
    UIPanel.ClosePage()
    local id = TerrainManager.GridIndexTurnBlockID(self.data.pos)
    local targetPos = TerrainManager.BlockIDTurnPosition(id)
    CameraMove.MoveCameraToPos(targetPos)
end