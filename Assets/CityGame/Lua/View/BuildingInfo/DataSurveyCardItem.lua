---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2019/7/29 15:39
--- Survey Card Item
DataSurveyCardItem = class('DataSurveyCardItem')

--Initialization method data (read configuration table)
function DataSurveyCardItem:initialize(inluabehaviour, prefab, goodsDataInfo,buildingId)
    self.prefab = prefab;
    self.goodsDataInfo = goodsDataInfo;
    self._luabehaviour = inluabehaviour
    self.buildingId = buildingId

    self.bg = self.prefab.transform:Find("bg").gameObject
    self.icon = self.prefab.transform:Find("icon"):GetComponent("Image")
    self.name = self.prefab.transform:Find("down/name"):GetComponent("Text")
    self.speed = self.prefab.transform:Find("down/speedBg/speedImage/speedText/Text"):GetComponent("Text")

    LoadSprite(ResearchConfig[goodsDataInfo.type].buildingPath, self.icon, true)
    self.name.text = GetLanguage(ResearchConfig[goodsDataInfo.type].name)
    self.speed.text = GetLanguage(27050006,string.format("%0.2f", 1/goodsDataInfo.speed))
    self._luabehaviour:AddClick(self.bg, self.OnBg, self);

end

function DataSurveyCardItem:OnBg(go)
    PlayMusEff(1002)
    local data = {}
    data.buildingId = go.buildingId
    data.config = {}
    data.config.content = ResearchConfig[go.goodsDataInfo.type].content
    data.config.iconPath = ResearchConfig[go.goodsDataInfo.type].buildingPath
    data.config.name = ResearchConfig[go.goodsDataInfo.type].name
    data.speed = go.goodsDataInfo.speed
    data.type = go.goodsDataInfo.type
    ct.OpenCtrl("ResearchCtrl",data)
end
