---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/11/1/001 17:52
---

-----------------------------------------------
require "Common/define"
local class = require 'Framework/class'


SmallPopItem = class('SmallPopItem')


SmallPopItem.endPOS=Vector2.New(0,462)

SmallPopItem.POS=Vector2.New(0,797)

local prefabTrans;


---初始化方法   数据（读配置表）
function SmallPopItem:initialize(string,type,prefab,mgr)
    prefabTrans=prefab.transform:GetComponent("RectTransform");
    self.tipText=prefab.transform:Find("textbg/tipText"):GetComponent("Text");

    self.textBgTrans=prefab.transform:Find("textbg"):GetComponent("RectTransform")
    prefabTrans.anchoredPosition=Vector2.New(0,797)
    self.tipText.text=string
    self.tipTextTrans=prefab.transform:Find("textbg/tipText"):GetComponent("RectTransform")

    prefabTrans:DOAnchorPos(SmallPopItem.endPOS, 0.5);

    self.timenow= 3

    if type == ReminderType.Common then
        self.textBgTrans.transform:GetComponent("Image").color = getColorByInt(243,243,243,230)
        self.tipText.color = getColorByInt(68,68,68,255)
    elseif type == ReminderType.Warning then
        self.textBgTrans.transform:GetComponent("Image").color = getColorByInt(174,32,32,230)
        self.tipText.color = getColorByInt(239,239,239,255)
    elseif type == ReminderType.Succeed then
        self.textBgTrans.transform:GetComponent("Image").color = getColorByInt(255,187,43,230)
        self.tipText.color = getColorByInt(82,63,30,255)
    else
        self.textBgTrans.transform:GetComponent("Image").color = getColorByInt(243,243,243,230)
        self.tipText.color = getColorByInt(68,68,68,255)
    end
    UpdateBeat:Remove(self._update, self);
    UpdateBeat:Add(self._update, self);
end


function SmallPopItem:_update()
    self.timenow = self.timenow - UnityEngine.Time.unscaledDeltaTime
    if  self.timenow <= 0  then
        self.timenow = 3
        prefabTrans.anchoredPosition=Vector2.New(0,797);
        UpdateBeat:Remove(self._update, self);
    end
end



