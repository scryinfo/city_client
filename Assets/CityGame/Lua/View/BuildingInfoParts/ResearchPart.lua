---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2019/4/10/010 15:32
---研究

ResearchPart = class('ResearchPart', BasePart)
--
function ResearchPart:PrefabName()
    return "ResearchPart"
end
--
function ResearchPart:GetDetailClass()
    return ResearchDetailPart
end
--
function ResearchPart:_InitTransform()
    local transform = self.transform
    --self.turnover = transform:Find("Top/turnover"):GetComponent("Text")

    self.queneBtn = transform:Find("Top/Button")
    self.hasImage = findByName(transform,"hasImage")
    self.queneCount = findByName(transform,"countText"):GetComponent("Text")
    self.queneText = findByName(transform,"queneText (1)"):GetComponent("Text")
    self.priceText = findByName(transform,"priceText"):GetComponent("Text")
    self.priceCount = findByName(transform,"turnover"):GetComponent("Text")
    self.TimeText = findByName(transform,"TimeText"):GetComponent("Text")
    self.TimeTextCount = findByName(transform,"TimeTextCount"):GetComponent("Text")
    self.title = findByName(transform,"Text"):GetComponent("Text")
    self.title1 = findByName(transform,"Text1"):GetComponent("Text")

end

--特殊按钮
function  ResearchPart:_InitChildClick(mainPanelLuaBehaviour)
    mainPanelLuaBehaviour:AddClick(self.queneBtn.gameObject,self.onClick_set, self)
end

--
function  ResearchPart:_ResetTransform()
   -- self.turnover.text = "0.0000"
end
--
function ResearchPart:RefreshData(data)
    if data == nil then
        return
    end
    self.m_data = data
    self:updateUI(data)
    self:updateLanguage()

end

---===================================================================================点击函数==============================================================================================

function ResearchPart:onClick_set(ins)
   ct.OpenCtrl("QueneCtrl",{name="View/Laboratory/InventGoodItem",data = ins.m_data.inProcess })
end

--
function ResearchPart:updateUI(data)
    --进行中
    if data.inProcess then
        self.queneCount.text = #(data.inProcess)
    else
        self.queneCount.text = 0
    end
    --已完成
    if data.completed then
        self.hasImage.localScale = Vector3.one
    else
        self.hasImage.localScale = Vector3.zero
    end
    self.priceCount.text =  data.pricePreTime
    self.TimeTextCount.text =  data.sellTimes
end

function ResearchPart:updateLanguage()
    --self.queneText
    --self.priceText
    --self.TimeText
    --self.title
    --self.title1
end