---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/3/28 10:27
---

LandTitleItem = class("LandTitleItem")

-- 初始化
function LandTitleItem:initialize(prefab, data)
    self.prefab = prefab
    self.data = data - 1
    --self.isSelect = false

    local transform = prefab.transform

    self.landSelectBtn = transform:GetComponent("Button")
    self.nameText = transform:Find("Label"):GetComponent("Text")
    self.numberText = transform:Find("Text"):GetComponent("Text")
    self:SetName()
    self:SetNumber()
    --self:SetSelect()

    self.landSelectBtn.onClick:RemoveAllListeners()
    self.landSelectBtn.onClick:AddListener(function ()
        self:_setContent()
    end)
end

-- 设置类型名字
function LandTitleItem:SetName()
    if self.data == 0 then
        self.nameText.text = "全部"
    elseif self.data == 1 then
        self.nameText.text = "租用中"
    elseif self.data == 2 then
        self.nameText.text = "已出租"
    elseif self.data == 3 then
        self.nameText.text = "出租中"
    elseif self.data == 4 then
        self.nameText.text = "出售中"
    elseif self.data == 5 then
        self.nameText.text = "可使用"
    end
end

-- 设置类型个数
function LandTitleItem:SetNumber(number)
    if number then
        self.numberText.text = number
    else
        self.numberText.text = "0"
    end
end

-- 设置是否选中
function LandTitleItem:SetSelect(isSelect)
    self.landSelectBtn.interactable = isSelect
end

-- 点击刷新
function LandTitleItem:_setContent()
    --self.isSelect = not self.isSelect
    CompanyCtrl.static.companyMgr.landTypeNum = self.data -- self.isSelect and self.data or 0
    self:SetSelect(false)
    DataManager.DetailModelRpcNoRet(OpenModelInsID.CompanyCtrl, 'm_GetGroundInfo')
end