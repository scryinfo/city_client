---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Fisher.
--- DateTime: 2019/5/18 15:42
---开业去人界面

OpenBuildingCheckCtrl = class('OpenBuildingCheckCtrl',UIPanel)
UIPanel:ResgisterOpen(OpenBuildingCheckCtrl) --注册打开的方法

local moneyColor = "#ffc926"
local timeColor = "#26f2ff"
local timeSize = 24

function OpenBuildingCheckCtrl:initialize()
    UIPanel.initialize(self,UIType.PopUp,UIMode.DoNothing,UICollider.Normal)
end

function OpenBuildingCheckCtrl:bundleName()
    return "Assets/CityGame/Resources/View/OpenBuildingCheckPanel.prefab"
end

function OpenBuildingCheckCtrl:OnCreate(obj)
    UIPanel.OnCreate(self,obj)
end

function OpenBuildingCheckCtrl:Awake(go)
    self.gameObject = go
    self:_getComponent(go)
    self.luaBehaviour = self.gameObject:GetComponent('LuaBehaviour')
    self.luaBehaviour:AddClick(self.closeBtn.gameObject,self._clickCloseBtn,self)
    self.luaBehaviour:AddClick(self.confirmBtn.gameObject,self._clickConfirmBtn,self)
end

function OpenBuildingCheckCtrl:Refresh()
    self:language()
    self:_initData()
end
-------------------------------------------------------------获取组件-------------------------------------------------------------------------------
function OpenBuildingCheckCtrl:_getComponent(go)
    self.closeBtn = go.transform:Find("root/closeBtn")
    self.confirmBtn = go.transform:Find("root/confirmBtn")
    self.contentText = go.transform:Find("root/contentText"):GetComponent("Text")
    self.oneText = go.transform:Find("root/tipsRoot/oneText"):GetComponent("Text")
    self.secondText = go.transform:Find("root/tipsRoot/secondText"):GetComponent("Text")
    self.thirdText = go.transform:Find("root/tipsRoot/thirdText"):GetComponent("Text")

    self.titleText01 = go.transform:Find("root/titleText"):GetComponent("Text")
end
-------------------------------------------------------------初始化函数------------------------------------------------------------------------------
function OpenBuildingCheckCtrl:_initData()
    if self.m_data ~= nil then
        local str1 = string.format("<color=%s>%s</color>", moneyColor, self.m_data.salary)
        local str2 = string.format("<color=%s><size=%d>%s</size></color>", timeColor, timeSize, self.m_data.time)
        self.contentText.text = GetLanguage(24020010, str1)
        self.secondText.text = GetLanguage(24020012, str2)
    end
end
-------------------------------------------------------------点击函数------------------------------------------------------------------------------
--关闭
function OpenBuildingCheckCtrl:_clickCloseBtn()
    PlayMusEff(1002)
    UIPanel.ClosePage()
end
--确认
function OpenBuildingCheckCtrl:_clickConfirmBtn(ins)
    if ins.m_data.fun ~= nil then
        ins.m_data.fun()
        PlayMusEff(1002)
        UIPanel.ClosePage()
    end
end
----------------------------------------------------------------------------------------------------------------------------------------------------
--多语言
function OpenBuildingCheckCtrl:language()
    self.titleText01.text = GetLanguage(24020008)
    self.oneText.text = GetLanguage(24020011)
    self.thirdText.text = GetLanguage(24020013)
end