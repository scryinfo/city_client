---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2018/12/25 10:41
---专家ctrl
ExpertCtrl = class('ExpertCtrl',UIPage)
UIPage:ResgisterOpen(ExpertCtrl) --注册打开的方法
local gameObject;
local ExpertBehaviour
ExpertCtrl.static.Addition_PATH = "View/TalentCenterItem/PropertyItem"

function  ExpertCtrl:bundleName()
    return "Assets/CityGame/Resources/View/ExpertPanel.prefab"
end

function ExpertCtrl:initialize()
    UIPage.initialize(self,UIType.Normal,UIMode.HideOther,UICollider.None)--可以回退，UI打开后，隐藏其它面板
    --UIPage.initialize(self,UIType.Normal,UIMode.NeedBack,UICollider.None)--可以回退，UI打开后，不隐藏其它的UI
end

--启动事件--
function ExpertCtrl:OnCreate(obj)
    UIPage.OnCreate(self,obj)
    ExpertBehaviour = self.gameObject:GetComponent('LuaBehaviour');
    ExpertBehaviour:AddClick(ExpertPanel.backBtn,self.OnBackBtn,self);


end

function ExpertCtrl:Refresh()
    --初始化
    self:_initData();
    --打开通知Model
    --self:initializeData()
end

function ExpertCtrl:initializeData()
    if self.m_data then
        DataManager.OpenDetailModel(GameNoticeModel,5)
    end
end

--初始化
function ExpertCtrl:_initData()
    for i = 1, 3 do
        local prefab = self:_creatAddition(ExpertCtrl.static.Addition_PATH,ExpertPanel.content)
        --local talentTypeLuaItem = TalentTypeLuaItem:new(prefab,TalentSelectBehaviour, i,V)
    end
end

--点击返回按钮
function ExpertCtrl:OnBackBtn()
    UIPage.ClosePage()
end

--生成预制
function ExpertCtrl:_creatAddition(path,parent)
    local prefab = UnityEngine.Resources.Load(path);
    local go = UnityEngine.GameObject.Instantiate(prefab);
    local rect = go.transform:GetComponent("RectTransform");
    go.transform:SetParent(parent.transform);
    rect.transform.localScale = Vector3.one;
    return go
end
