---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/10/20 15:57
---成交记录
local class = require 'Framework/class'
RecordTransactionItem = class('RecordTransactionItem')
RecordTransactionItem.static.SELL_GREEN = "#0B7B16"  --卖出的绿色数值
RecordTransactionItem.static.BUY_RED = "#E42E2E"

--初始化方法
function RecordTransactionItem:initialize(data, viewRect)
    self.viewRect = viewRect;
    self.data = data;

    local viewTrans = self.viewRect;
    self.nameText = viewTrans:Find("name/nameText"):GetComponent("Text");
    self.iconImg = viewTrans:Find("name/iconBg/Image"):GetComponent("Image");

    self.quantityText = viewTrans:Find("quantity/quantityText"):GetComponent("Text");
    self.unitPriceText = viewTrans:Find("unitPrice/unitPriceText"):GetComponent("Text");
    self.totalText = viewTrans:Find("total/totalText"):GetComponent("Text");
    self.timeText = viewTrans:Find("time/timeText"):GetComponent("Text");

    self:_initData()
end

--初始化界面
function RecordTransactionItem:_initData()
    local data = self.data
    self.nameText.text = data.name
    if data.isSell then
        self.currentTextColor = RecordTransactionItem.static.SELL_GREEN
        self.currentBarColor = RecordTransactionItem.static.BAR_GREEN
    else
        self.currentTextColor = RecordTransactionItem.static.BUY_RED
        self.currentBarColor = RecordTransactionItem.static.BAR_RED
    end
    self.quantityText.text = string.format("<color=%s>%s</color>", self.currentTextColor, data.quantity)
    self.unitPriceText.text = string.format("<color=%s>E%s</color>", self.currentTextColor, getPriceString(data.unitPrice, 30, 24))
    self.totalText.text = string.format("<color=%s>E%s</color>", self.currentTextColor, getPriceString(data.total, 30, 24))
    self.timeText.text = data.time
end