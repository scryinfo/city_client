---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/11/29 18:35
---
local transform
LabInventionPanel = {}
local this = LabInventionPanel

function LabInventionPanel.Awake(obj)
    transform = obj.transform
    this.InitPanel()
end

function LabInventionPanel.InitPanel()
    this.backBtn = transform:Find("topRoot/backBtn")
    this.progressSuccessBtn = transform:Find("bottomRoot/left/progressRoot/successImg")  --Button displayed when finished
    this.workingImgRootTran = transform:Find("bottomRoot/left/progressRoot/workingImg")
    this.progressWorkingImg = transform:Find("bottomRoot/left/progressRoot/workingImg/progressImg"):GetComponent("Image")  --Inventing, setting fill amount
    this.timeDownText = transform:Find("bottomRoot/left/progressRoot/workingImg/timeDownText"):GetComponent("Text")  --Countdown
    this.emptyTextTran = transform:Find("bottomRoot/left/progressRoot/emptyText")

    this.phaseItems = LabInventionItemPhaseItems:new(transform:Find("bottomRoot/left/rollRoot/successItems"), true)

    this.itemNameText = transform:Find("bottomRoot/right/titleBg/itemNameText"):GetComponent("Text")
    this.goodRootTran = transform:Find("bottomRoot/right/goods")
    this.rawRootTran = transform:Find("bottomRoot/right/rawMat")
    this.goodIconImg = transform:Find("bottomRoot/right/goods/iconImg"):GetComponent("Image")
    this.matIconImg = transform:Find("bottomRoot/right/rawMat/iconImg"):GetComponent("Image")

    this.inventionBtn = transform:Find("bottomRoot/right/inventBtnParent/inventionBtn"):GetComponent("Button")
    this.workingImgTran = transform:Find("bottomRoot/right/inventBtnParent/workingImg")
    this.notEnoughImgTran = transform:Find("bottomRoot/right/inventBtnParent/notEnoughImg")

    this.singleLineTran = transform:Find("bottomRoot/right/goods/singleLine")
    this.singleLineItem = LabFormulaItem:new(this.singleLineTran)
    this.twoLineTran = transform:Find("bottomRoot/right/goods/twoLine")
    this.twoLineItem = LabFormulaItem:new(this.twoLineTran)
    this.threeLineTran = transform:Find("bottomRoot/right/goods/threeLine")
    this.threeLineItem = LabFormulaItem:new(this.threeLineTran)
end
--Setup
function LabInventionPanel.setBulbState(state)
    if state == LabInventionBulbItemState.Empty then
        this.emptyTextTran.localScale = Vector3.one
        this.workingImgRootTran.localScale = Vector3.zero
        this.progressSuccessBtn.localScale = Vector3.zero
    elseif state == LabInventionBulbItemState.Locked then
        this.emptyTextTran.localScale = Vector3.zero
        this.workingImgRootTran.localScale = Vector3.one
        this.progressSuccessBtn.localScale = Vector3.zero

        this.progressWorkingImg.fillAmount = 0
        this.timeDownText.text = ""
    elseif state == LabInventionBulbItemState.Working then
        this.emptyTextTran.localScale = Vector3.zero
        this.workingImgRootTran.localScale = Vector3.one
        this.progressSuccessBtn.localScale = Vector3.zero
    elseif state == LabInventionBulbItemState.Finish then
        this.emptyTextTran.localScale = Vector3.zero
        this.workingImgRootTran.localScale = Vector3.zero
        this.progressSuccessBtn.localScale = Vector3.one
    end
end
--Display information about filled lines
function LabInventionPanel.showLine(datas)
    local count = #datas
    if count == 0 then
        this.singleLineTran.localScale = Vector3.zero
        this.twoLineTran.localScale = Vector3.zero
        this.threeLineTran.localScale = Vector3.zero
        return
    end
    if count == 1 then
        this.singleLineTran.localScale = Vector3.one
        this.twoLineTran.localScale = Vector3.zero
        this.threeLineTran.localScale = Vector3.zero
        this.singleLineItem:showState(datas)
    elseif count == 2 then
        this.singleLineTran.localScale = Vector3.zero
        this.twoLineTran.localScale = Vector3.one
        this.threeLineTran.localScale = Vector3.zero
        this.twoLineItem:showState(datas)
    elseif count == 3 then
        this.singleLineTran.localScale = Vector3.zero
        this.twoLineTran.localScale = Vector3.zero
        this.threeLineTran.localScale = Vector3.one
        this.threeLineItem:showState(datas)
    end
end