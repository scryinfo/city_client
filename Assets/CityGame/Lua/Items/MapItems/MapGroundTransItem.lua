---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2019/2/27 18:13
---
MapGroundTransItem = class('MapGroundTransItem', MapBubbleBase)

--
function MapGroundTransItem:_childInit()
    self.scaleRoot = self.viewRect.transform:Find("root")  --The part to be zoomed

    local trans = self.viewRect.transform
    self.groundSell = trans:Find("root/groundSell")
    self.groundRent = trans:Find("root/groundRent")

    self.sellBtn = trans:Find("root/groundSell/sellBtn"):GetComponent("Button")
    self.sellText01 = trans:Find("root/groundSell/sellBtn/Text"):GetComponent("Text")
    self.rentBtn = trans:Find("root/groundRent/rentBtn"):GetComponent("Button")
    self.rentText02 = trans:Find("root/groundRent/rentBtn/Text"):GetComponent("Text")
    self.selectTran = trans:Find("root/selectImg")
    self.selectTranText = trans:Find("root/selectImg/Text"):GetComponent("Text")

    self.sellBtn.onClick:AddListener(function ()
        PlayMusEff(1002)
        self:_openGroundTransPage()
    end)
    self.rentBtn.onClick:AddListener(function ()
        PlayMusEff(1002)
        self:_openGroundTransPage()
    end)

    self:initData(self.data)
end
--
function MapGroundTransItem:initData(data)
    self.data = data
    self:_setBubbleState(data.detailData.groundState)
end
--
function MapGroundTransItem:_setBubbleState(state)
    if state == GroundTransState.Sell then
        self.groundSell.localScale = Vector3.one
        self.groundRent.localScale = Vector3.zero
        --self.sellText01.text = GetLanguage()
        self.sellText01.text = GetLanguage(22010004)
        self.selectTranText.text = GetLanguage(22010004)
    elseif state == GroundTransState.Rent then
        self.groundRent.localScale = Vector3.one
        self.groundSell.localScale = Vector3.zero
        self.rentText02.text = GetLanguage(22010003)
        self.selectTranText.text = GetLanguage(22010003)
    end
end
--
function MapGroundTransItem:_openGroundTransPage()
    if self.data == nil then
        return
    end
    MapCtrl.selectCenterItem(self)
    Event.Brocast("c_MapOpenRightGTransPage", self)
end