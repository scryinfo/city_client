---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/10/10 11:12
---
-----


TestExchangeCtrl = class('TestExchangeCtrl',UIPage)

function TestExchangeCtrl:initialize()
    UIPage.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
    self.itemlist = {}
end

function TestExchangeCtrl:bundleName()
    return "Assets/CityGame/Resources/View/TestExchangePanel.prefab"
end

function TestExchangeCtrl:OnCreate(obj)
    UIPage.OnCreate(self, obj)

    self:_initPanelData()
end

function TestExchangeCtrl:Awake(go)
    self.gameObject = go
    self.luaBehaviour = go:GetComponent('LuaBehaviour')
end

function TestExchangeCtrl:Refresh()
    self:_initPanelData()
end

function TestExchangeCtrl:Close()

end

---初始化界面
function TestExchangeCtrl:_initPanelData()

    TestExchangeCtrl.static.mainPanelLuaBehaviour = self.luaBehaviour

    local staticData = {}
    staticData[1] = {text = 001, imgPath = ""}
    staticData[2] = {text = 002, imgPath = ""}
    staticData[3] = {text = 003, imgPath = ""}
    staticData[4] = {text = 004, imgPath = ""}
    staticData[5] = {text = 005, imgPath = ""}
    staticData[6] = {text = 006, imgPath = ""}
    staticData[7] = {text = 007, imgPath = ""}
    staticData[8] = {text = 008, imgPath = ""}
    staticData[9] = {text = 009, imgPath = ""}
    staticData[10] = {text = 010, imgPath = ""}
    staticData[11] = {text = 011, imgPath = ""}
    staticData[12] = {text = 012, imgPath = ""}
    staticData[13] = {text = 013, imgPath = ""}
    staticData[14] = {text = 014, imgPath = ""}
    staticData[15] = {text = 015, imgPath = ""}
    staticData[16] = {text = 016, imgPath = ""}
    staticData[17] = {text = 017, imgPath = ""}
    TestExchangeCtrl.static.sourceInfo = staticData

    local loopSource = UnityEngine.UI.LoopScrollDataSource.New()
    loopSource.mProvideData = TestExchangeCtrl.static.ProvideData
    loopSource.mClearData = TestExchangeCtrl.static.ClearData
    TestExchangePanel.loopScroll:ActiveScroll(loopSource, 17)

end

TestExchangeCtrl.static.ProvideData = function(transform, idx)
    idx = idx + 1
    if not TestExchangeCtrl.static.sourceInfo[idx] then
        return
    end

    TestExchangeCtrl.static.sourceInfo[idx].transform = transform
    local item = TestExchangeScrollItemCtrl:new(TestExchangeCtrl.static.sourceInfo[idx], TestExchangeCtrl.static.mainPanelLuaBehaviour)
    --self.itemlist[#self.itemlist+1] = item
end

TestExchangeCtrl.static.ClearData = function(transform)
    --ct.log("cycle_w8_exchange01_loopScroll", "回收"..transform.name)
end
