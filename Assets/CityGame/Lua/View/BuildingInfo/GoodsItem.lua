---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/10/27/027 17:51
---

require'View/BuildingInfo/MapAdvertisementItem'

require('Framework/UI/UIPage')
local class = require 'Framework/class'
GoodsItem = class('GoodsItem')

GoodsItem.AddedItem_Path="View/GoodsItem/MapAdvertisementItem"



---初始化方法   数据（读配置表）
function GoodsItem:initialize(prefabData,prefab,inluabehaviour, mgr, id)
    self.prefab = prefab;
    self.prefabData = prefabData;
    self._luabehaviour = inluabehaviour
    self.manager = mgr
    self.id = id
    self.ItemList=mgr.goodsItemList

    self.addBtn=self.prefab

    self._luabehaviour:AddClick(self.addBtn, self.OnClick_Add, self);

end
---添加
function GoodsItem:OnClick_Add(go)
    if (not  go.manager.transform)then
      return
    end
    ---创建映射广告
    local item=go.manager:c_creatGoods(GoodsItem.AddedItem_Path,go.manager.transform)
    ---给映射广告赋值数据
    local prefabData={}
    MapAdvertisementItem:new(prefabData,item,go._luabehaviour,go.manager,go.manager.index)
    ---选中广告隐藏
    self:SetActive(false);
    ---管理器表添加
    go.manager.addedItemList[go.manager.index]=item
    go.manager.selectItemList[go.manager.index]=self
    ---尾部处理
    go.manager.index=go.manager.index+1
    go.manager.transform=nil
end












