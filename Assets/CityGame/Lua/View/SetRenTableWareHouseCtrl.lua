---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by ljw.
--- DateTime: 2019/4/22 16:41
---

SetRenTableWareHouseCtrl = class('SetRenTableWareHouseCtrl',UIPanel)
UIPanel:ResgisterOpen(SetRenTableWareHouseCtrl)

function SetRenTableWareHouseCtrl:initialize()
    UIPanel.initialize(self,UIType.PopUp,UIMode.DoNothing,UICollider.Normal)
end

function SetRenTableWareHouseCtrl:bundleName()
    return "Assets/CityGame/Resources/View/SetRenTableWareHousePanel.prefab"
end

function SetRenTableWareHouseCtrl:OnCreate(obj)
    UIPanel.OnCreate(self,obj)
end

function SetRenTableWareHouseCtrl:Awake(go)
    self.luaBehaviour = self.gameObject:GetComponent('LuaBehaviour')
    self.luaBehaviour:AddClick(SetRenTableWareHousePanel.closeBtn.gameObject,self._clickCloseBtn,self)
    self.luaBehaviour:AddClick(SetRenTableWareHousePanel.startBtn.gameObject,self._clickstartBtn,self)
    self.luaBehaviour:AddClick(SetRenTableWareHousePanel.shutBtn.gameObject,self._clickshutBtn,self)
end

function SetRenTableWareHouseCtrl:Active(go)
    --SetRenTableWareHousePanel.numSlider.maxValue = go.m_data.availableCapacity
    UIPanel.Active(self)
    self:_language()
end

function SetRenTableWareHouseCtrl:Refresh()

end

function SetRenTableWareHouseCtrl:Hide()
    UIPanel.Hide(self)
    --self:CloseDestroy()
end

----------------------------------------------------------------------------------------------------------------------------------------------------
--Set up multiple languages
function SetRenTableWareHouseCtrl:_language()
    SetRenTableWareHousePanel.topNameText.text = "SET RENTABLE WAREHOUSE"
    --self.placeholderText.text = "Set up a rentable warehouse"
    --SetRenTableWareHousePanel.priceText.text = "0.0000"
end
-------------------------------------------------- --------------- click function --------------------------------- -------------------------------------------
--Refresh data after directly closing the page
function SetRenTableWareHouseCtrl:_clickCloseBtn()
    UIPanel.ClosePage()
end

--Confirm refresh data after setting
function SetRenTableWareHouseCtrl:_clickstartBtn(go)
        local data = {}
        data.buildingId = go.m_data.insId
        data.rentCapacity = SetRenTableWareHousePanel.spaceText.text
        data.minHourToRent = SetRenTableWareHousePanel.mintimeText.text
        data.maxHourToRent = SetRenTableWareHousePanel.maxtimeText.text
        data.rent = SetRenTableWareHousePanel.priceText.text
        data.enableRent = true
        DataManager.OpenDetailModel(BuidingWareHouseModel, data.buildingId)
        DataManager.DetailModelRpcNoRet(data.buildingId,'m_ReqSentHouseDetailInfo',data)
        UIPanel.ClosePage()
end

--Cancel page
function SetRenTableWareHouseCtrl:_clickshutBtn(go)
    ct.OpenCtrl("MyShutDownCtrl",go)
end























