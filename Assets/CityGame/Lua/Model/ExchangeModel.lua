---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/10/26 17:14
---
ExchangeModel = {};
local this = ExchangeModel;
local pbl = pbl

--构建函数--
function ExchangeModel.New()
    return this;
end

function ExchangeModel.Awake()
    --UpdateBeat:Add(this.Update, this);
    this:OnCreate();
end

--启动事件--
function ExchangeModel.OnCreate()
    --网络回调注册 网络回调用n开头
    CityEngineLua.Message:registerNetMsg(pbl.enum("gscode.OpCode","exchangeItemList"), ExchangeModel.n_OnReceiveExchangeItemList);

    --本地的回调注册
    Event.AddListener("m_ReqExchangeItemList", this.m_ReqExchangeItemList);
end

--关闭事件--
function ExchangeModel.Close()
    --Event.RemoveListener("m_PlayerBidGround", this.m_BidGround);
end

--- 客户端请求 ---
--请求行情信息
function ExchangeModel.m_ReqExchangeItemList()
    local msgId = pbl.enum("gscode.OpCode","exchangeItemList")
    CityEngineLua.Bundle:newAndSendMsg(msgId, nil);
end

---网络回调
--收到拍卖中的土地信息
function ExchangeModel.n_OnReceiveExchangeItemList(stream)
    local quotesData = assert(pbl.decode("gs.ExchangeItemSummary", stream), "ExchangeModel.n_OnReceiveExchangeItemList: stream == nil")
    Event.Brocast("c_onReceiveExchangeItemList", quotesData);
end