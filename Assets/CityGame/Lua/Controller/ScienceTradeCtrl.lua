---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/10/25/025 17:47
---


require "Common/define"

require('Framework/UI/UIPage')

local class = require 'Framework/class'
ScienceTradeCtrl = class('ScienceTradeCtrl',UIPage)
UIPage:ResgisterOpen(ScienceTradeCtrl) --注册打开的方法

---构建函数
function ScienceTradeCtrl:initialize()
    UIPage.initialize(self,UIType.Normal,UIMode.HideOther,UICollider.None);
end

function ScienceTradeCtrl:bundleName()
    return "ScienceTradePanel";
end

function ScienceTradeCtrl:OnCreate(obj)
    UIPage.OnCreate(self,obj);

end

local panel
local Mgr
local materialBehaviour
function ScienceTradeCtrl:Awake(go)
    self.gameObject = go;
    Mgr=ScienceSellHallModel.Mgr
    panel=ScienceTradePanel
    materialBehaviour = self.gameObject:GetComponent('LuaBehaviour');
    materialBehaviour:AddClick(panel.backBtn.gameObject,self.OnClick_backBtn,self);
    materialBehaviour:AddClick(panel.plusBtn.gameObject,self.OnClick_search,self);
    local data={}
    data.itemId=1
    local item =Mgr:creatSciencetradeItem(materialBehaviour,data)
   item:SetActive(false)
end


function ScienceTradeCtrl:Refresh()
    Event.Brocast("m_techTradeGetDetail",self.m_data.itemid)
    ---name
    panel.nameText.text=self.m_data.nameText.text
    panel.scoreText.text=self.m_data.ScoreText.text
    panel.mylevelText.text=self.m_data.myleveltext.text
    panel.owenrText.text=self.m_data.ownerText.text
    panel.highlevelTetx.text=self.m_data.leveltext.text
    self.itemId=self.m_data.itemid
end

--返回
function ScienceTradeCtrl:OnClick_backBtn()
    UIPage.ClosePage();
    for i, v in pairs(Mgr.scienceItemList) do
        v:SetActive(false)
    end
end

--搜索
function ScienceTradeCtrl:OnClick_search(Ins)
   ct.OpenCtrl("ScienceSellPopCtrl",Ins)
end

function ScienceTradeCtrl:CreatedSciencetradeItem(data)
    Mgr:creatSciencetradeItem(materialBehaviour,data)
end



