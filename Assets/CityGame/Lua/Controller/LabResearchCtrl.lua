---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/11/16 15:48
---
LabResearchCtrl = class('LabResearchCtrl',UIPage)
UIPage:ResgisterOpen(LabResearchCtrl)

LaboratoryCtrl.static.EmptyBtnPath = "View/Items/LaboratoryItems/EmptyBtn"  --按钮的预制
LaboratoryCtrl.static.LabResearchItemPath = "View/Items/LaboratoryItems/LabResearchItem"  --研究
LaboratoryCtrl.static.LabInventionItemPath = "View/Items/LaboratoryItems/LabInventionItem"  --发明

function LabResearchCtrl:initialize()
    UIPage.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
end

function LabResearchCtrl:bundleName()
    return "LabResearchPanel"
end

function LabResearchCtrl:OnCreate(obj)
    UIPage.OnCreate(self, obj)
    --关闭面板
    local LuaBehaviour = self.gameObject:GetComponent('LuaBehaviour')
    LuaBehaviour:AddClick(LabResearchPanel.backBtn.gameObject, function()
        UIPage.ClosePage()
    end)
end

function LabResearchCtrl:Awake(go)
    self.gameObject = go
    LabResearchCtrl.static.luaBehaviour = self.gameObject:GetComponent('LuaBehaviour')

    --滑动复用部分
    self.researchSource = UnityEngine.UI.LoopScrollDataSource.New()  --行情
    self.researchSource.mProvideData = LabResearchCtrl.static.researchProvideData
    self.researchSource.mClearData = LabResearchCtrl.static.researchClearData
    self.inventionSource = UnityEngine.UI.LoopScrollDataSource.New()  --收藏
    self.inventionSource.mProvideData = LabResearchCtrl.static.inventionProvideData
    self.inventionSource.mClearData = LabResearchCtrl.static.inventionClearData
end

function LabResearchCtrl:Refresh()
    self:_initPanelData()
end

function LabResearchCtrl:Close()
    self:_removeListener()
end

function LabResearchCtrl:_addListener()
    --Event.AddListener("c_onExchangeSort", self._exchangeSortByValue, self)

end
function LabResearchCtrl:_removeListener()
    --Event.RemoveListener("c_onExchangeSort", self._exchangeSortByValue, self)
end

function LabResearchCtrl:_initPanelData()
    self:_addListener()

    LabResearchPanel._researchToggleState(true)
    LabResearchPanel._inventionToggleState(false)
    LabResearchPanel.researchScroll.transform.localScale = Vector3.one
    LabResearchPanel.inventionScroll.transform.localScale = Vector3.zero

    LabResearchCtrl.researchItems = {}
    LabResearchCtrl.inventionItems = {}

    self.researchPrefabList =
    {
        LaboratoryCtrl.static.EmptyBtnPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
        LaboratoryCtrl.static.LabResearchItemPath,
    }
    LabResearchPanel.researchScroll:ActiveDiffItemLoop(self.researchSource, self.researchPrefabList)

    --Event.Brocast("m_ReqExchangeItemList")
end

---toggle
function LabResearchCtrl:_researchToggleValueChange(isOn)

end

---滑动复用
--研究
LabResearchCtrl.static.researchProvideData = function(transform, idx)
    if idx == 0 then
        --self.researchEmptyBtn = ExchangeQuoteItem:new(LabResearchCtrl.quoteDatas[idx], transform)
        return
    end

    --idx = idx + 1
    --local item = ExchangeQuoteItem:new(LabResearchCtrl.quoteDatas[idx], transform)
    --LabResearchCtrl.researchItems[idx] = item
end
LabResearchCtrl.static.researchClearData = function(transform)
end
--发明
LabResearchCtrl.static.inventionProvideData = function(transform, idx)
    if idx == 0 then
        --self.researchEmptyBtn = ExchangeQuoteItem:new(LabResearchCtrl.quoteDatas[idx], transform)
        return
    end

    idx = idx + 1
    local item = ExchangeQuoteItem:new(LabResearchCtrl.quoteDatas[idx], transform)
    LabResearchCtrl.inventionItems[idx] = item
end
LabResearchCtrl.static.inventionClearData = function(transform)
end

---从modle传来的回调
function LabResearchCtrl:c_onReceiveExchangeItemList(datas)

end