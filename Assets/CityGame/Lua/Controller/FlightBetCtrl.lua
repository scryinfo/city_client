---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/12/26 17:29
---FlightBetCtrl
FlightBetCtrl = class('FlightBetCtrl',UIPanel)
UIPanel:ResgisterOpen(FlightBetCtrl)

function FlightBetCtrl:initialize()
    UIPanel.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
end
--
function FlightBetCtrl:bundleName()
    return "Assets/CityGame/Resources/View/FlightBetPanel.prefab"
end
--
function FlightBetCtrl:OnCreate(obj)
    UIPanel.OnCreate(self, obj)
end
--
function FlightBetCtrl:Awake(go)
    local behaviour = self.gameObject:GetComponent('LuaBehaviour')
    behaviour:AddClick(FlightBetPanel.backBtn.gameObject, self._backBtnFunc, self)
    behaviour:AddClick(FlightBetPanel.confirmBtn.gameObject, function ()
        self:_confirmBtnFunc()
    end, self)
    behaviour:AddClick(FlightBetPanel.timeReduceBtn.gameObject, function ()
        self:_timeReduceFunc()
    end, self)
    behaviour:AddClick(FlightBetPanel.timeAddBtn.gameObject, function ()
        self:_timeAddFunc()
    end, self)
    behaviour:AddClick(FlightBetPanel.betReduceBtn.gameObject, function ()
        self:_betReduceFunc()
    end, self)
    behaviour:AddClick(FlightBetPanel.betAddBtn.gameObject, function ()
        self:_betAddFunc()
    end, self)
    FlightBetPanel.timeSlider.onValueChanged:AddListener(function(value)
        self.timeValue = value
        FlightBetPanel.timeValueText.text = self.timeValue
        if value < 0 then
            FlightBetPanel.timeText05.text = GetLanguage(32030011)
        else
            FlightBetPanel.timeText05.text = GetLanguage(32030010)
        end
    end)
    FlightBetPanel.betSlider.onValueChanged:AddListener(function(value)
        self.betValue = value
        FlightBetPanel.betValueText.text = self.betValue
    end)
end
--
function FlightBetCtrl:Refresh()
    self:_initPanelData()
end
--
function FlightBetCtrl:Active()
    UIPanel.Active(self)
    self:_language()
end
--
function FlightBetCtrl:_language()
    FlightBetPanel.titleText01.text = GetLanguage(32030008)
    FlightBetPanel.timeText02.text = GetLanguage(32030009)
    FlightBetPanel.timeText03.text = GetLanguage(32030012)
    FlightBetPanel.timeText04.text = GetLanguage(32030013)
    FlightBetPanel.timeText05.text = GetLanguage(32030010)  --延误/提前

    FlightBetPanel.betText06.text = GetLanguage(32030014)
    FlightBetPanel.betText07.text = GetLanguage(32030016)
    FlightBetPanel.betText08.text = GetLanguage(32030017)
    FlightBetPanel.betText09.text = GetLanguage(32030015)
    FlightBetPanel.tipText10.text = GetLanguage(32030018)
end
--
function FlightBetCtrl:Hide()
    UIPanel.Hide(self)
end
--
function FlightBetCtrl:Close()
    UIPanel.Close(self)
end
--
function FlightBetCtrl:_initPanelData()
    FlightBetPanel.timeSlider.minValue = FlightConfig.MinTime
    FlightBetPanel.timeSlider.maxValue = FlightConfig.MaxTime
    FlightBetPanel.timeSlider.value = 0
    self.timeValue = 0
    FlightBetPanel.timeValueText.text = self.timeValue

    FlightBetPanel.betSlider.minValue = FlightConfig.MinBet
    FlightBetPanel.betSlider.maxValue = FlightConfig.MaxBet
    FlightBetPanel.betSlider.value = FlightBetPanel.betSlider.minValue
    self.betValue = FlightBetPanel.betSlider.value
    FlightBetPanel.betValueText.text = self.betValue
end
--
function FlightBetCtrl:_closeBtnFunc()
    PlayMusEff(1002)
    UIPanel:ClosePage()
end
--
function FlightBetCtrl:_confirmBtnFunc()
    PlayMusEff(1002)
    UIPanel:ClosePage()
end
--
function FlightBetCtrl:_timeReduceFunc()
    self.timeValue = self.timeValue - 1
    FlightBetPanel.timeValueText.text = self.timeValue
    FlightBetPanel.timeSlider.value = self.timeValue
end
--
function FlightBetCtrl:_timeAddFunc()
    self.timeValue = self.timeValue + 1
    FlightBetPanel.timeValueText.text = self.timeValue
    FlightBetPanel.timeSlider.value = self.timeValue
end
--
function FlightBetCtrl:_betReduceFunc()
    self.betValue = self.betValue - 1
    FlightBetPanel.betValueText.text = self.betValue
    FlightBetPanel.betSlider.value = self.betValue
end
--
function FlightBetCtrl:_betAddFunc()
    self.betValue = self.betValue - 1
    FlightBetPanel.betValueText.text = self.betValue
    FlightBetPanel.betSlider.value = self.betValue
end