---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/1/15 17:50
---

BusinessRecordsItem = class('BusinessRecordsItem')

-- 初始化
function BusinessRecordsItem:initialize(prefab, data)
    self.prefab = prefab
    self.data = data

    local transform = prefab.transform
    local typeText = transform:Find("TypeText"):GetComponent("Text")
    local nameImage = transform:Find("NameImage").gameObject
    local nameText = transform:Find("NameImage/NameText"):GetComponent("Text")
    local incomeImage = transform:Find("IncomeImage").gameObject
    local incomeTitle = transform:Find("IncomeImage/IncomeTitle"):GetComponent("Text")
    local incomeText = transform:Find("IncomeImage/IncomeText"):GetComponent("Text")
    local expensesImage = transform:Find("ExpensesImage").gameObject
    local expensesTitle = transform:Find("ExpensesImage/ExpensesTitle"):GetComponent("Text")
    local expensesText = transform:Find("ExpensesImage/ExpensesText"):GetComponent("Text")

    incomeTitle.text = GetLanguage(17010002)
    expensesTitle.text = GetLanguage(17010003)
    if self.data.itemId > 2200000 then
        typeText.text = "-Goods-"
        nameText.text = GetLanguage(self.data.itemId)
        incomeText.text = self:_formatData(self.data.income, true)
        expensesText.text = self:_formatData(self.data.expenses, false)
        incomeImage:SetActive(true)
        expensesImage:SetActive(true)
        nameImage:SetActive(true)
        incomeImage.transform.anchoredPosition = Vector2.New(-182, 30)
    elseif self.data.itemId > 2100000 then
        typeText.text = "-Raw material-"
        nameText.text = GetLanguage(self.data.itemId)
        incomeText.text = self:_formatData(self.data.income, true)
        expensesText.text = self:_formatData(self.data.expenses, false)
        incomeImage:SetActive(true)
        expensesImage:SetActive(true)
        nameImage:SetActive(true)
        incomeImage.transform.anchoredPosition = Vector2.New(-182, 30)
    elseif self.data.itemId == 1000 then
        typeText.text = GetLanguage(17010009) --"-土地买卖-"
        incomeText.text = self:_formatData(self.data.income, true)
        expensesText.text = self:_formatData(self.data.expenses, false)
        incomeImage:SetActive(true)
        expensesImage:SetActive(true)
        nameImage:SetActive(false)
        incomeImage.transform.anchoredPosition = Vector2.New(-182, 30)
    elseif self.data.itemId == 1001 then
        typeText.text = GetLanguage(17010008)  -- "-土地租赁-"
        incomeText.text = self:_formatData(self.data.income, true)
        expensesText.text = self:_formatData(self.data.expenses, false)
        incomeImage:SetActive(true)
        expensesImage:SetActive(true)
        nameImage:SetActive(false)
        incomeImage.transform.anchoredPosition = Vector2.New(-182, 30)
    elseif self.data.itemId == 1002 then
        typeText.text = GetLanguage(17010011) --"-运输费用-"
        expensesText.text = self:_formatData(self.data.expenses, false)
        incomeImage:SetActive(false)
        expensesImage:SetActive(true)
        nameImage:SetActive(false)
    elseif self.data.itemId == 1003 then
        typeText.text = GetLanguage(17010012) -- "-员工工资-"
        expensesText.text = self:_formatData(self.data.expenses, false)
        incomeImage:SetActive(false)
        expensesImage:SetActive(true)
        nameImage:SetActive(false)
    elseif self.data.itemId == 1004 then
        typeText.text = GetLanguage(17010010) -- "-住宅房租-"
        incomeText.text = self:_formatData(self.data.income, true)
        incomeImage:SetActive(true)
        expensesImage:SetActive(false)
        nameImage:SetActive(false)
        incomeImage.transform.anchoredPosition = Vector2.New(-182, -91.5)
    end
end

function BusinessRecordsItem:_formatData(number, isIncome)
    if number == 0 then
        return GetClientPriceString(number)
    else
        if isIncome then
            return string.format("+E%s", GetClientPriceString(number))
        else
            return string.format("-E%s", GetClientPriceString(number))
        end
    end
end