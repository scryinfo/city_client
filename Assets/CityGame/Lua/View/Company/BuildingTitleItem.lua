---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/3/29 17:37
---

BuildingTitleItem = class("BuildingTitleItem")

-- 初始化
function BuildingTitleItem:initialize(prefab, data)
    self.prefab = prefab
    self.data = data - 1
    --self.isSelect = false

    local transform = prefab.transform

    self.buildingSelectBtn = transform:GetComponent("Button")
    self.nameText = transform:Find("Label"):GetComponent("Text")
    self.numberText = transform:Find("Text"):GetComponent("Text")
    self:SetName()
    self:SetNumber()
    --self:SetSelect()

    self.buildingSelectBtn.onClick:RemoveAllListeners()
    self.buildingSelectBtn.onClick:AddListener(function ()
        self:_setContent()
    end)
end

-- 设置类型名字
function BuildingTitleItem:SetName()
    if self.data == 0 then
        self.nameText.text = "全部"
    elseif self.data == 1 then
        self.nameText.text = "原料厂"
    elseif self.data == 2 then
        self.nameText.text = "加工厂"
    elseif self.data == 3 then
        self.nameText.text = "零售店"
    elseif self.data == 4 then
        self.nameText.text = "住宅"
    elseif self.data == 5 then
        self.nameText.text = "学院"
    elseif self.data == 6 then
        self.nameText.text = "推广公司"
    elseif self.data == 7 then
        self.nameText.text = "仓库"
    end
end

-- 设置类型个数
function BuildingTitleItem:SetNumber(number)
    if number then
        self.numberText.text = number
    else
        self.numberText.text = "0"
    end
end

-- 设置是否选中
function BuildingTitleItem:SetSelect(isSelect)
    self.buildingSelectBtn.interactable = isSelect
end

-- 点击刷新
function BuildingTitleItem:_setContent()
    --self.isSelect = not self.isSelect
    CompanyCtrl.static.companyMgr.buildingTypeNum = self.data -- self.isSelect and self.data or 0
    self:SetSelect(false)
    DataManager.DetailModelRpcNoRet(OpenModelInsID.CompanyCtrl, 'm_QueryMyBuildings')
end