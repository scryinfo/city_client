---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2018/12/25 10:41
---Expert ctrl
ExpertCtrl = class('ExpertCtrl',UIPage)
UIPage:ResgisterOpen(ExpertCtrl) --How to open the registration
local gameObject;
local ExpertBehaviour
ExpertCtrl.static.Addition_PATH = "View/TalentCenterItem/PropertyItem"

function  ExpertCtrl:bundleName()
    return "Assets/CityGame/Resources/View/ExpertPanel.prefab"
end

function ExpertCtrl:initialize()
    UIPage.initialize(self,UIType.Normal,UIMode.HideOther,UICollider.None)--You can go back and hide other panels after the UI opens
    --UIPage.initialize(self,UIType.Normal,UIMode.NeedBack,UICollider.None)--Can go back, after the UI is opened, other UI is not hidden
end

--Start event--
function ExpertCtrl:OnCreate(obj)
    UIPage.OnCreate(self,obj)
    ExpertBehaviour = self.gameObject:GetComponent('LuaBehaviour');
    ExpertBehaviour:AddClick(ExpertPanel.backBtn,self.OnBackBtn,self);


end

function ExpertCtrl:Refresh()
    --initialization
    self:_initData();
    --Open notification model
    --self:initializeData()
end

function ExpertCtrl:initializeData()
    if self.m_data then
        DataManager.OpenDetailModel(GameNoticeModel,nil,self)
    end
end

--initialization
function ExpertCtrl:_initData()
    for i = 1, 3 do
        local prefab = self:_creatAddition(ExpertCtrl.static.Addition_PATH,ExpertPanel.content)
        --local talentTypeLuaItem = TalentTypeLuaItem:new(prefab,TalentSelectBehaviour, i,V)
    end
end

--Click the back button
function ExpertCtrl:OnBackBtn()
    UIPage.ClosePage()
end

--Generate prefab
function ExpertCtrl:_creatAddition(path,parent)
    local prefab = UnityEngine.Resources.Load(path);
    local go = UnityEngine.GameObject.Instantiate(prefab);
    local rect = go.transform:GetComponent("RectTransform");
    go.transform:SetParent(parent.transform);
    rect.transform.localScale = Vector3.one;
    return go
end
