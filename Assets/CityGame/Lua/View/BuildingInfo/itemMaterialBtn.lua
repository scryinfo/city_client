---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Fisher.
--- DateTime: 2019/7/24 16:04
---建筑经营详情Item（三个字段属性显示）
itemMaterialBtn = class('itemMaterialBtn')

function itemMaterialBtn:initialize(data,prefab,luaBehaviour,keyId)
    self.data = data
    self.keyId = keyId
    self.prefab = prefab

    self.bgBtn = prefab.transform:Find("bgBtn")
    self.iconImg = prefab.transform:Find("info/icon/iconImg"):GetComponent("Image")
    self.nameText = prefab.transform:Find("info/nameText"):GetComponent("Text")
    self.todaySalesText = prefab.transform:Find("todaySales/todaySalesText"):GetComponent("Text")
    self.proportionText = prefab.transform:Find("proportion/proportionText"):GetComponent("Text")

    luaBehaviour:AddClick(self.bgBtn.gameObject,self._clickBgBtn,self)
    self:InitializeData()
end

function itemMaterialBtn:InitializeData()
    if not self.data.itemId then
        LoadSprite("Assets/CityGame/Resources/View/BuildIcon/SuperMarket_1x1.png",self.iconImg,true)
    else
        self.iconImg.sprite = SpriteManager.GetSpriteByPool(self.data.itemId)
    end
    self.nameText.text = self.data.name
    self.todaySalesText.text = "+E"..GetClientPriceString(self.data.todaySales)
    self.proportionText.text = self.data.proportion.."%"
end

function itemMaterialBtn:_clickBgBtn(ins)
    Event.Brocast("calculateLinePanel",ins.keyId)
end