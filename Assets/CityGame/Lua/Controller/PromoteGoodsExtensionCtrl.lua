---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2019/4/12 9:24
---推广公司商品扩展
PromoteGoodsExtensionCtrl = class('PromoteGoodsExtensionCtrl',UIPanel)
UIPanel:ResgisterOpen(PromoteGoodsExtensionCtrl)

local buildingExtensionBehaviour

function PromoteGoodsExtensionCtrl:bundleName()
    return "Assets/CityGame/Resources/View/PromoteGoodsExtensionPanel.prefab"
end

function PromoteGoodsExtensionCtrl:initialize()
    --UIPanel.initialize(self,UIType.Normal,UIMode.HideOther,UICollider.None)--可以回退，UI打开后，隐藏其它面板
    UIPanel.initialize(self,UIType.PopUp,UIMode.NeedBack,UICollider.None)--可以回退，UI打开后，不隐藏其它的UI
end
function PromoteGoodsExtensionCtrl:Awake()
    buildingExtensionBehaviour = self.gameObject:GetComponent('LuaBehaviour')
    buildingExtensionBehaviour:AddClick(PromoteGoodsExtensionPanel.xBtn,self.OnXBtn,self);
    buildingExtensionBehaviour:AddClick(PromoteGoodsExtensionPanel.curve,self.OnCurve,self);
    self:initData()
end

function PromoteGoodsExtensionCtrl:Active()
    UIPanel.Active(self)
end

function PromoteGoodsExtensionCtrl:Refresh()

end

function PromoteGoodsExtensionCtrl:Hide()
    UIPanel.Hide(self)

end

function PromoteGoodsExtensionCtrl:OnCreate(obj)
    UIPanel.OnCreate(self,obj)
end

function PromoteGoodsExtensionCtrl:initData()
    if self.m_data.subclass == nil then
        return
    end
    self.PromoteGoods = {}
    for i, v in ipairs(self.m_data.subclass) do
        local function callback(prefab)
           self.PromoteGoods[i] = PromoteGoodsItem:new(prefab,v)
        end
        createPrefab("Assets/CityGame/Resources/View/GoodsItem/PromoteGoodsItem.prefab",PromoteGoodsExtensionPanel.content, callback)
    end
end

--返回
function PromoteGoodsExtensionCtrl:OnXBtn()
    UIPanel.ClosePage()
end

--打开曲线图
function PromoteGoodsExtensionCtrl:OnCurve()
    ct.OpenCtrl("PromoteCurveCtrl")
end