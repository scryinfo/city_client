---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2018/12/15 17:25
---通知Model
GameNoticeModel = class("GameNoticeModel",ModelBase)
local pbl = pbl

function GameNoticeModel:initialize(insId)
    self.insId = insId
    self:OnCreate()
end

function GameNoticeModel:OnCreate()
    --Online registration
    DataManager.ModelRegisterNetMsg(nil,"gscode.OpCode","mailRead","gs.Id",self.n_OnMailRead,self)
    DataManager.ModelRegisterNetMsg(nil,"gscode.OpCode","delMail","gs.Id",self.n_OnDeleMails,self)
    DataManager.ModelRegisterNetMsg(nil,"gscode.OpCode","getOneSocietyInfo","gs.SocietyInfo",self.n_OnSocietyInfo,self)
    DataManager.ModelRegisterNetMsg(nil,"gscode.OpCode","queryBuildingName","gs.Str",self.n_OnBulidingName,self)
end

function GameNoticeModel:Close()
    --Clear local UI events
end
--Client request--

--读取邮件
function GameNoticeModel:m_mailRead(mailId)
    DataManager.ModelSendNetMes("gscode.OpCode", "mailRead","gs.Id",{id = mailId})

end

--删除邮件
function GameNoticeModel:m_delMail(mailId)
    DataManager.ModelSendNetMes("gscode.OpCode", "delMail","gs.Id",{id = mailId})

end

--获取公会名字
function GameNoticeModel:m_GetSocietyInfo(id)
    DataManager.ModelSendNetMes("gscode.OpCode","getOneSocietyInfo" ,"gs.Id",{id = id})
end

--获取建筑名字
function GameNoticeModel:m_queryBuildingName(buildingId)
    DataManager.ModelSendNetMes("gscode.OpCode","queryBuildingName" ,"gs.Id",{id = buildingId})
end

--Server callback--

--查看
function GameNoticeModel:n_OnMailRead(lMsg)
    Event.Brocast("c_OnMailRead",lMsg.id)
end

--删除
function GameNoticeModel:n_OnDeleMails(lMsg)
    Event.Brocast("c_OnDeleMails",lMsg.id)
end

--公会详情回调
function GameNoticeModel:n_OnSocietyInfo(info)
    Event.Brocast("c_SocietyInfo",info.name)
end

--建筑名字回调
function GameNoticeModel:n_OnBulidingName(info)
    Event.Brocast("GetBuildingName",info.str)
end