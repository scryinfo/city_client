---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/5/30 19:40
---

ResultOneItem = class("ResultOneItem")

-- 初始化
function ResultOneItem:initialize(transform, data, configData)
    self.transform = transform
    self.titleText = transform:Find("TitleText"):GetComponent("Text")
    self.addText = transform:Find("AddText"):GetComponent("Text")
    self.addContentText = transform:Find("AddText/AddContentText"):GetComponent("Text")
    self.largeText = transform:Find("LargeText"):GetComponent("Text")
    self.mediumText = transform:Find("MediumText"):GetComponent("Text")
    self.smallText = transform:Find("SmallText"):GetComponent("Text")
end

-- 初始化数据
function ResultOneItem:_initData(data, configData)
    self.configData = configData
    self.data = data
    self.titleText.text = configData.name

    if configData.Btype == "ProduceSpeed" then
        self.addText.text = "Speed bonus"
    elseif configData.Btype == "Quality" then
        self.addText.text = "Quality bonus"
    elseif configData.Btype == "PromotionAbility" then
        self.addText.text = "Ability bonus"
    elseif configData.Btype == "InventionUpgrade" then
        self.addText.text = "Upgrade bonus"
    elseif configData.Btype == "EvaUpgrade" then
        self.addText.text = "Upgrade bonus"
    end
    self:_showData(data.lv)
end

-- 显示数据
function ResultOneItem:_showData(lv)
    for i = 1, 3 do
        local brandSizeNum,tempText
        if i == 1 then
            brandSizeNum = 900
            tempText = self.largeText
        elseif i == 2 then
            brandSizeNum = 400
            tempText = self.mediumText
        elseif i == 3 then
            brandSizeNum = 100
            tempText = self.smallText
        end
        if self.data.bt == "Quality" then
            if self.data.at < 2100000 then -- 建筑品质加成
                tempText.text = string.format( "%.2f", (1 + EvaUp[lv].add / 100000) * self.configData.basevalue * brandSizeNum)
            else -- 商品品质值
                tempText.text = string.format( "%.2f",EvaUp[lv].add / 1000 * self.configData.basevalue)
            end
            --elseif data.bt == "Brand" then
            --    self.reputationText.text = tostring(data.b)
        elseif self.data.bt == "ProduceSpeed" then
            --self.titleText.text = "ProduceSpeed"
            tempText.text = math.floor((1 / ((1 + EvaUp[lv].add / 100000) * self.configData.basevalue)) / brandSizeNum) .. "s/个"
        elseif self.data.bt == "PromotionAbility" then
            --self.titleText.text = "PromotionAbility"
            tempText.text = math.floor((1 + EvaUp[lv].add / 100000) * self.configData.basevalue * brandSizeNum) .. "s/个"
        elseif self.data.bt == "InventionUpgrade" then
            --self.titleText.text = "InventionUpgrade"
            tempText.text = math.floor(((1 + EvaUp[lv].add / 100000) * (self.configData.basevalue / 100000)) * 100 * brandSizeNum) .. "%"
        elseif self.data.bt == "EvaUpgrade" then
            --self.titleText.text = "EvaUpgrade"
            tempText.text = math.floor(((1 + EvaUp[lv].add / 100000) * (self.configData.basevalue / 100000)) * 100 * brandSizeNum) .. "%"
            --elseif data.bt == "WarehouseUpgrade" then
            --    self.titleText.text = "WarehouseUpgrade"
            --    self.contentText.text = math.floor((1 + EvaUp[data.lv].add / 100000) * self.evaBaseValueData[data.bt] * brandSizeNum)
        end
    end
    if lv == 1 then
        self.addContentText.text = "0"
    else
        self.addContentText.text = tostring(EvaUp[lv].add / 1000) .. "%"
    end
end

-- 设置是否显示
function ResultOneItem:_isShow(isShow)
    self.transform.localScale = isShow and Vector3.one or Vector3.zero
end