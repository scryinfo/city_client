---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2019/2/27 18:13
---小地图搜索类型
MapSearchTypeItemBase = class('MapSearchTypeItemBase')

--初始化方法
function MapSearchTypeItemBase:initialize(data, selectFunc, viewRect)
    self.viewRect = viewRect
    self.data = data
    self.selectFunc = selectFunc

    self.choose = self.viewRect.transform:Find("choose")
    self.chooseIconImg = self.viewRect.transform:Find("choose/icon"):GetComponent("Image")
    self.chooseShowNameText = self.viewRect.transform:Find("choose/showNameText"):GetComponent("Text")
    self.disChoose = self.viewRect.transform:Find("disChoose")
    self.disChooseIconImg = self.viewRect.transform:Find("disChoose/icon"):GetComponent("Image")
    self.greyTypeNameText = self.viewRect.transform:Find("disChoose/greyTypeNameText"):GetComponent("Text")
    self.pageState = self.viewRect.transform:Find("openState")
    self.pageOpenImg = self.viewRect.transform:Find("openState/openImg")

    self.clickBtn = self.viewRect.transform:Find("clickBtn"):GetComponent("Button")
    self.loadBtnTran = self.viewRect.transform:Find("loadBtn")
    self.clickBtn.onClick:AddListener(function ()
        self:_clickFunc()
    end)
    self.isOpenState = false  --是否是打开状态  --只用于有展开页的typeItem

    --加载图片
    LoadSprite(data.selectIconPath, self.chooseIconImg, true)
    LoadSprite(data.disSelectIconPath, self.disSelectIconImg, true)

    Event.AddListener("c_SearchEndLoading", self._endLoading, self)  --结束loading
    Event.AddListener("c_ChooseTypeDetail", self._chooseTypeDetail, self)  --选中搜索某个东西
    self:resetState()
end

--

--重置状态
function MapSearchTypeItemBase:resetState()
    self.isSelect = false  --选中自己
    self.isOpenState = false  --打开展开页，只针对有page的item
    self.choose.localScale = Vector3.zero
    self.disChoose.localScale = Vector3.one
    self.pageOpenImg.localScale = Vector3.zero
    self.loadBtnTran.transform.localScale = Vector3.zero
    self:_childInitFunc()
    self:_language()
end
--多语言
function MapSearchTypeItemBase:_language()
    --正式代码
    --self.selectShowNameText.text = GetLanguage(self.data.languageId)
    --self.greyTypeNameText.text = GetLanguage(self.data.languageId)

    self.chooseShowNameText.text = self.data.name
    self.greyTypeNameText.text = self.data.name
end
--loading
function MapSearchTypeItemBase:_endLoading()
    self.loadBtnTran.transform.localScale = Vector3.zero
end

function MapSearchTypeItemBase:getIsSelect()
    return self.isSelect
end

function MapSearchTypeItemBase:getTypeId()
    return self.data.typeId
end

---需要子类重写的方法
--点击事件
function MapSearchTypeItemBase:_clickFunc() end

function MapSearchTypeItemBase:_childInitFunc() end

function MapSearchTypeItemBase:_chooseTypeDetail() end