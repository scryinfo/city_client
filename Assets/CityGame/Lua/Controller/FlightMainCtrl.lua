---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/9/21 10:35
---
-----

FlightMainCtrl = class('FlightMainCtrl',UIPanel)
UIPanel:ResgisterOpen(FlightMainCtrl)

function FlightMainCtrl:initialize()
    UIPanel.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
end

function FlightMainCtrl:bundleName()
    return "Assets/CityGame/Resources/View/FlightMainPanel.prefab"
end

function FlightMainCtrl:OnCreate(obj)
    UIPanel.OnCreate(self, obj)
end

function FlightMainCtrl:Awake(go)
    self.gameObject = go
    local behaviour = self.gameObject:GetComponent('LuaBehaviour')
    behaviour:AddClick(FlightMainPanel.backBtn.gameObject, function ()
        self:backFunc()
    end , self)
    behaviour:AddClick(FlightMainPanel.searchBtn.gameObject, function ()
        self:searchFunc()
    end , self)
    behaviour:AddClick(FlightMainPanel.moneyBtn.gameObject, function ()
        self:clickMoneyFunc()
    end , self)
    behaviour:AddClick(FlightMainPanel.leftBtn.gameObject, function ()
        self:leftPageFunc()
    end , self)
    behaviour:AddClick(FlightMainPanel.rightBtn.gameObject, function ()
        self:rightPageFunc()
    end , self)
    behaviour:AddClick(FlightMainPanel.recordBtn.gameObject, function ()
        self:recordFunc()
    end , self)

    self.pageEvent = ScrollPageEventData.New()  --滑动翻页事件
    self.pageEvent.mProvideData = FlightMainCtrl.static.ProvideFunc
    self.pageEvent.mClearData = FlightMainCtrl.static.ClearFunc
    self.pageEvent.mLeftEndFunc = FlightMainCtrl.static.LeftEndFunc
    self.pageEvent.mRightEndFunc = FlightMainCtrl.static.RightEndFunc
    self.pageEvent.mBtnNomalFunc = FlightMainCtrl.static.BtnNormalFunc
end
--
function FlightMainCtrl:Refresh()
    self:_initData()
end
--
function FlightMainCtrl:Active()
    UIPanel.Active(self)
    self:_language()
end
--
function FlightMainCtrl:Hide()
    UIPanel.Hide(self)
end
--
FlightMainCtrl.static.ProvideFunc = function(transform, idx)
    idx = idx + 1
    local item = FlightMainPageItem:new(transform, FlightMainCtrl.listValue[idx])
    FlightMainCtrl.static.itemsList[idx] = item
end
--
FlightMainCtrl.static.ClearFunc = function(transform) end

--正常状态
FlightMainCtrl.static.BtnNormalFunc = function()
    FlightMainPanel.rightBtn.localScale = Vector3.one
    FlightMainPanel.leftBtn.localScale = Vector3.one
end
--到达最左边
FlightMainCtrl.static.LeftEndFunc = function()
    FlightMainPanel.leftBtn.localScale = Vector3.zero
end
--到达最右边
FlightMainCtrl.static.RightEndFunc = function()
    FlightMainPanel.rightBtn.localScale = Vector3.zero
end
--
function FlightMainCtrl:_initData()
    --temp
    self.m_data = {}
    self.m_data.valueList = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}

    if self.m_data ~= nil then
        self:cleanItemList()
        FlightMainCtrl.listValue = self.m_data.valueList
        FlightMainPanel.scrollPage:InitData(self.pageEvent, #self.m_data.valueList)
    end
end
--
function FlightMainCtrl:cleanItemList()
    if FlightMainCtrl.static.itemsList == nil then
        FlightMainCtrl.static.itemsList = {}
        return
    end
    for i, value in pairs(FlightMainCtrl.static.itemsList) do
        value:Close()
    end
end
--
function FlightMainCtrl:_language()
    FlightMainPanel.titleText01.text = GetLanguage(32010001)
    FlightMainPanel.recordText02.text = GetLanguage(32010002)
end
--
function FlightMainCtrl:backFunc()
    PlayMusEff(1002)
    UIPanel.ClosePage()
end
--点击搜索
function FlightMainCtrl:searchFunc()
    PlayMusEff(1002)
    ct.OpenCtrl("FlightSearchCtrl")
end
--点击充值
function FlightMainCtrl:clickMoneyFunc()
    PlayMusEff(1002)
    --ct.OpenCtrl()
end
--翻页左按钮
function FlightMainCtrl:leftPageFunc()
    PlayMusEff(1002)
    FlightMainPanel.scrollPage:PrevPage()
end
--右翻页
function FlightMainCtrl:rightPageFunc()
    PlayMusEff(1002)
    FlightMainPanel.scrollPage:NextPage()
end
--预测记录界面
function FlightMainCtrl:recordFunc()
    PlayMusEff(1002)
    ct.OpenCtrl("FlightRecordCtrl")
end