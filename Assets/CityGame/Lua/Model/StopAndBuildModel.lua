---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/12/25/025 17:54
---

local pbl = pbl
StopAndBuildModel={}
local this=StopAndBuildModel

function StopAndBuildModel.Awake()
   this:OnCreate()
   --UpdateBeat:Add(this._updateTime, self);
end

function StopAndBuildModel:OnCreate()
    Event.AddListener("m_startBusiness", StopAndBuildModel.m_startBusiness,self);--Opening
    Event.AddListener("m_shutdownBusiness", StopAndBuildModel.m_shutdownBusiness,self);--Closed
    Event.AddListener("m_delBuilding", StopAndBuildModel.m_delBuilding,self);--Demolition of buildings and contracting

    ----Register AccountServer Message
    CityEngineLua.Message:registerNetMsg(pbl.enum("gscode.OpCode","startBusiness"),this.n_startBusiness);--Opening
    CityEngineLua.Message:registerNetMsg(pbl.enum("gscode.OpCode","shutdownBusiness"),this.n_shutdownBusiness);--Closed
end
---Opening contract
function StopAndBuildModel:m_startBusiness(buildingID)
DataManager.ModelSendNetMes("gscode.OpCode", "startBusiness","gs.Id",{ id = buildingID})
end
---Opening package
function StopAndBuildModel.n_startBusiness(lMsg)
 Event.Brocast("c_successBuilding")
end

---Out of business
function StopAndBuildModel:m_shutdownBusiness(buildingID)
    DataManager.ModelSendNetMes("gscode.OpCode", "shutdownBusiness","gs.Id",{ id = buildingID})
end

---Out of business
function StopAndBuildModel.n_shutdownBusiness(lMsg)
    Event.Brocast("SmallPop",GetLanguage(40010018),300)
end

---Demolition of buildings and contracting
function StopAndBuildModel:m_delBuilding(buildingID)
    DataManager.ModelSendNetMes("gscode.OpCode", "delBuilding","gs.Id",{ id = buildingID})
end

-----Demolition and construction
--function StopAndBuildModel.n_delBuilding(lMsg)
--    Event.Brocast("SmallPop","Success",300)
--end

function StopAndBuildModel:_updateTime()
    --Event.AddListener("m_startBusiness", StopAndBuildModel.m_startBusiness,self);--Opening
    --Event.AddListener("m_shutdownBusiness", StopAndBuildModel.m_shutdownBusiness,self);--Closed
    --Event.AddListener("m_delBuilding", StopAndBuildModel.m_delBuilding,self);--Demolition building and contracting
    if UnityEngine.Input.GetKeyDown(UnityEngine.KeyCode.X) then
        ct.log("system","aaaaaaaaaaaaaaaaa")
        Event.Brocast("m_delBuilding",MunicipalPanel.buildingId)
    end

end

