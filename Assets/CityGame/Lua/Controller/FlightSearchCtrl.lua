---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/9/21 10:35
---
-----

FlightSearchCtrl = class('FlightSearchCtrl',UIPanel)
UIPanel:ResgisterOpen(FlightSearchCtrl)

function FlightSearchCtrl:initialize()
    UIPanel.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
end

function FlightSearchCtrl:bundleName()
    return "Assets/CityGame/Resources/View/FlightSearchPanel.prefab"
end

function FlightSearchCtrl:OnCreate(obj)
    UIPanel.OnCreate(self, obj)
end

function FlightSearchCtrl:Awake(go)
    self.gameObject = go
    local behaviour = self.gameObject:GetComponent('LuaBehaviour')
    behaviour:AddClick(FlightSearchPanel.backBtn.gameObject, function ()
        self:backFunc()
    end , self)
    behaviour:AddClick(FlightSearchPanel.startBtn.gameObject, function ()
        self:startChooseFunc()
    end , self)
    behaviour:AddClick(FlightSearchPanel.endBtn.gameObject, function ()
        self:endChooseFunc()
    end , self)
    behaviour:AddClick(FlightSearchPanel.timeBtn.gameObject, function ()
        self:timeChooseFunc()
    end , self)
    behaviour:AddClick(FlightSearchPanel.exchangeBtn.gameObject, function ()
        self:exchangeBtnFunc()
    end , self)
    behaviour:AddClick(FlightSearchPanel.checkBtn.gameObject, function ()
        self:checkBtnFunc()
    end , self)
end

function FlightSearchCtrl:Refresh()
    self:_initData()
end

function FlightSearchCtrl:Active()
    UIPanel.Active(self)
end

function FlightSearchCtrl:Hide()
    UIPanel.Hide(self)
end
--
function FlightSearchCtrl:_initData()
    --默认出发地为北京，目的地为上海
    FlightSearchPanel.timeText.text = os.date("%w, %Y-%m-%d", os.time())
end
--
function FlightSearchCtrl:_language()

end
--
function FlightSearchCtrl:backFunc()
    UIPanel.ClosePage()
end
--选择起飞地
function FlightSearchCtrl:startChooseFunc()
    ct.OpenCtrl("FlightChoosePlaceCtrl", {callback = function(data)
        self:startChooseResult(data)
    end})
end
--选择目的地
function FlightSearchCtrl:endChooseFunc()
    ct.OpenCtrl("FlightChoosePlaceCtrl", {callback = function(data)
        self:endChooseResult(data)
    end})
end
--选择时间
function FlightSearchCtrl:timeChooseFunc()
    --ct.OpenCtrl("FlightChoosePlaceCtrl", {callback = self.timeChooseResult})
end
--起始地目的地交换
function FlightSearchCtrl:exchangeBtnFunc()

end
--开始搜索
function FlightSearchCtrl:checkBtnFunc()

end
--起点选择的回调
function FlightSearchCtrl:startChooseResult(data)
    FlightSearchPanel.startText.text = data.value
    UIPanel.ClosePage()
end
--终点选择的回调
function FlightSearchCtrl:endChooseResult(data)
    FlightSearchPanel.endText.text = data.value
    UIPanel.ClosePage()
end
--起点选择的回调
function FlightSearchCtrl:timeChooseResult(data)
    FlightSearchPanel.timeText.text = data.value
    UIPanel.ClosePage()
end