---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/5/28 17:18
---

EvaTitleItemThere = class("EvaTitleItemThere", BaseEvaTitleItem)
EvaTitleItemThere.static.NomalNameColor = Vector3.New(136, 170, 253) -- Default name color
EvaTitleItemThere.static.SelectNameColor = Vector3.New(74, 97, 189) -- Selected name color

-- Subclasses inherit their own methods to display specific content
function EvaTitleItemThere:_showContent()
    local recordData = EvaCtrl.static.evaCtrl:GetEvaRecordData()
    self.nameText.text = GetLanguage(EvaCtrl.static.evaCtrl.allUIData[recordData[1]].option[recordData[2]].option[self.index].name)
    if EvaCtrl.static.evaCtrl.isClickEvaT then
        EvaCtrl.static.evaCtrl.isClickEvaT = false
        self:_onClickBtn()
    end
    if recordData[1] == 2 then
        if EvaCtrl.static.evaCtrl.addData and EvaCtrl.static.evaCtrl.addData[recordData[1]] and EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]] and EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]].optionValue[self.index] then
            if EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]].optionValue[self.index].value then
                self:_setAddNumber(EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]].optionValue[self.index].value )
            else
                self:_setAddNumber()
            end
            if EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]].optionValue[self.index].marketValue then
                self:_setMarketAddNumber(EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]].optionValue[self.index].marketValue )
            else
                self:_setMarketAddNumber()
            end
        else
            self:_setAddNumber()
            self:_setMarketAddNumber()
        end
    else
        if EvaCtrl.static.evaCtrl.addData and EvaCtrl.static.evaCtrl.addData[recordData[1]] and EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]] and EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]].optionValue[self.index] then
            self:_setAddNumber(EvaCtrl.static.evaCtrl.addData[recordData[1]].optionValue[recordData[2]].optionValue[self.index].value )
        else
            self:_setAddNumber()
        end
        self:_setMarketAddNumber()
    end
end

-- 按钮点击事件、子类继承实现自己的方法
function EvaTitleItemThere:_onClickBtn()
    BaseEvaTitleItem._onClickBtn(self)
    local recordData = EvaCtrl.static.evaCtrl:GetEvaRecordData()
    EvaCtrl.static.evaCtrl:CreatePropertyItem(EvaCtrl.static.evaCtrl.allUIData[recordData[1]].option[recordData[2]].option[recordData[3]].property)
end

-- 设置按钮文字的颜色、子类继承实现自己的方法
function EvaTitleItemThere:_setNameTextColor(isSelect)
    self.nameText.color = getColorByVector3(isSelect and EvaTitleItemThere.static.NomalNameColor or EvaTitleItemThere.static.SelectNameColor)
end