---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2018/10/25 11:49
---仓库商品
local class = require 'Framework/class'
require('Framework/UI/UIPage')
WareHouseGoodsItem = class('WareHouseGoodsItem')

--初始化方法   数据（读配置表）
function WareHouseGoodsItem:initialize(goodsDataInfo,prefab,inluabehaviour, mgr, id)
    self.prefab = prefab;
    self.goodsDataInfo = goodsDataInfo;
    self._luabehaviour = inluabehaviour
    self.manager = mgr
    self.id = id
    self.nameText = self.prefab.transform:Find("TransportItem/GoodsName").gameObject:GetComponent("Text");
    self.numberText = self.prefab.transform:Find("TransportItem/NumberText").gameObject:GetComponent("Text");
    self.deleteBtn = self.prefab.transform:Find("WareHouseItem/Delete/DeleteButton").gameObject;
    self.select = self.prefab.transform:Find("TransportItem/Select").gameObject;
    self.select_while = self.prefab.transform:Find("TransportItem/Select/Select-white").gameObject;
    self.bgItem = self.prefab.transform:Find("WareHouseItem").gameObject;
    self.transportBG = self.prefab.transform:Find("TransportItem").gameObject;
    self.nameText.text = goodsDataInfo.name
    self.numberText.text = goodsDataInfo.number

    self._luabehaviour:AddClick(self.deleteBtn, self.OnDelete, self);
    self._luabehaviour:AddClick(self.bgItem, self.OnBGItem,self)
    self._luabehaviour:AddClick(self.transportBG,self.OnTransportBG,self)
end
--删除
function WareHouseGoodsItem:OnDelete(go)
    Event.Brocast("c_OnDelete",go)
end

--点击BG
function WareHouseGoodsItem:OnBGItem()
    Event.Brocast("c_OnBGItem")
end

--点击运输后的BG
function WareHouseGoodsItem:OnTransportBG(go)
    Event.Brocast("c_OnTransportBG",go)
end

--删除后刷新ID及刷新显示
function WareHouseGoodsItem:RefreshID(id)
    self.id = id
end

function WareHouseGoodsItem:setActiva(isSelect)
    self.select:SetActive(not isSelect);
    self.bgItem:SetActive(isSelect);
end

function WareHouseGoodsItem:Enabled()
    self.select_while:SetActive(true);
    self.transportBG:GetComponent("Button").enabled = true
end