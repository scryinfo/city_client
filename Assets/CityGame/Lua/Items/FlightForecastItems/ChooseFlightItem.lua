---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2019/5/27 11:37
---
ChooseFlightItem = class('ChooseFlightItem')

--Initialization method
function ChooseFlightItem:initialize(viewRect, data)
    self.viewRect = viewRect.transform
    self.btn = self.viewRect:Find("btn"):GetComponent("Button")

    self.flightCodeText = self.viewRect:Find("01/Text"):GetComponent("Text")  --flight number
    self.planStartTimeText = self.viewRect:Find("02/Text"):GetComponent("Text")  --Planned departure time
    self.trueStartTimeText = self.viewRect:Find("03/Text"):GetComponent("Text")  --Actual departure time
    self.planArriveTimeText = self.viewRect:Find("04/Text"):GetComponent("Text")  --Planned arrival time
    self.trueArriveTimeText = self.viewRect:Find("05/Text"):GetComponent("Text")  --Actual arrival time
    self.stateText = self.viewRect:Find("06/Text"):GetComponent("Text")  --status

    self.btn.onClick:RemoveAllListeners()
    self.btn.onClick:AddListener(function ()
        self:ClickFunc()
    end)

    self:initData(data)
end
--
function ChooseFlightItem:initData(data)
    self.data = data
    self.flightCodeText.text = data.FlightNo  --flight number
    self.planStartTimeText.text = self:_getSecondStr(data.FlightDeptimePlanDate)  --Planned departure time
    self.trueStartTimeText.text = self:_getSecondStr(data.FlightDeptimeDate)  --Actual departure time
    self.planArriveTimeText.text = self:_getSecondStr(data.FlightArrtimePlanDate)  --Planned arrival time
    self.trueArriveTimeText.text = self:_getSecondStr(data.FlightArrtimeDate)  --Actual arrival time
    self.stateText.text = GetLanguage(FlightStateConfig[data.FlightState])  --status
end
--Get time in xx minutes xx seconds format
function ChooseFlightItem:_getSecondStr(str)
    if str == nil or str == "" then
        return "--"
    end
    local temp = string.sub(str, 12, 16)
    return temp
end
--
function ChooseFlightItem:ClickFunc()
    PlayMusEff(1002)
    --0 for popular, 1 for history, 2 for search
    ct.OpenCtrl("FlightDetailCtrl", {detail = self.data, dataType = 2})
end
--
function ChooseFlightItem:Close()

end

