---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by password.
--- DateTime: 2018/10/31 10:52
---运输商品
local class = require 'Framework/class'
require('Framework/UI/UIPage')
TransportGoodsItem = class('TransportGoodsItem')

--初始化方法   数据（读配置表）
function TransportGoodsItem:initialize(goodsDataInfo,prefab,inluabehaviour,mgr,id,itemId)
    self.prefab = prefab;
    self.goodsDataInfo = goodsDataInfo;
    self._luabehaviour = inluabehaviour;
    self.manager = mgr;
    self.id = id;
    self.itemId = itemId

    self.name = self.prefab.transform:Find("nameText").gameObject:GetComponent("Text")
    self.goodsIcon = self.prefab.transform:Find("goodsIcon"):GetComponent("Image");
    self.inputText = self.prefab.transform:Find("InputField").gameObject:GetComponent("InputField");
    self.scrollbar = self.prefab.transform:Find("Scrollbar").gameObject:GetComponent("Slider");
    self.xBtn = self.prefab.transform:Find("closeBtn").gameObject;

    self.name.text = self.goodsDataInfo.name;
    self.totalNumber = self.goodsDataInfo.number;

    local materialKey,goodsKey = 21,22
    local type = ct.getType(UnityEngine.Sprite)
    if math.floor(self.itemId / 100000) == materialKey then
        panelMgr:LoadPrefab_A(Material[self.itemId].img,type,nil,function(goodData,obj)
            if obj ~= nil then
                local texture = ct.InstantiatePrefab(obj)
                self.goodsIcon.sprite = texture
            end
        end)
    elseif math.floor(self.itemId / 100000) == goodsKey then
        panelMgr:LoadPrefab_A(Good[self.itemId].img,type,nil,function(goodData,obj)
            if obj ~= nil then
                local texture = ct.InstantiatePrefab(obj)
                self.goodsIcon.sprite = texture
            end
        end)
    end


    self._luabehaviour:AddClick(self.xBtn,self.OnxBtn,self)
    self.scrollbar.maxValue =  self.totalNumber
end

function TransportGoodsItem:OnxBtn(go)
    PlayMusEff(1002)
    Event.Brocast("c_OnxBtn",go)
end