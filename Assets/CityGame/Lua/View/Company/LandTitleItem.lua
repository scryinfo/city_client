---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Tina.
--- DateTime: 2019/3/28 10:27
---

-- 公司、我的土地、土地类型显示，可以点击，显示该类土地
LandTitleItem = class("LandTitleItem")
LandTitleItem.static.NomalNameColor = Vector3.New(51, 51, 51) -- 默认的名字颜色
LandTitleItem.static.SelectNameColor = Vector3.New(255, 255, 255) -- 被选中的名字颜色
LandTitleItem.static.NomalNumberColor = Vector3.New(153, 153, 153) -- 默认的数量颜色
LandTitleItem.static.SelectNumberColor = Vector3.New(91, 162, 249) -- 被选中的数量颜色
LandTitleItem.static.NomalNumberBgColor = Vector3.New(238, 238, 238) -- 默认的数量背景色
LandTitleItem.static.SelectNumberBgColor = Vector3.New(255, 255, 255) -- 被选中的数量背景色

-- 初始化
function LandTitleItem:initialize(prefab, data)
    self.prefab = prefab
    self.data = data - 1
    --self.isSelect = false

    local transform = prefab.transform

    self.landSelectBtn = transform:GetComponent("Button")
    self.nameText = transform:Find("NameText"):GetComponent("Text")
    self.numberText = transform:Find("NumberText"):GetComponent("Text")
    self.bgImage = transform:Find("Bg"):GetComponent("Image")
    self:SetName()
    self:SetNumber()
    self:SetSelect(true)

    self.landSelectBtn.onClick:RemoveAllListeners()
    self.landSelectBtn.onClick:AddListener(function ()
        self:_setContent()
    end)
end

-- 设置类型名字
function LandTitleItem:SetName()
    if self.data == 0 then
        self.nameText.text = GetLanguage(18020002) -- "全部"
    elseif self.data == 1 then
        self.nameText.text = GetLanguage(18020003) -- "租用中"
    elseif self.data == 2 then
        self.nameText.text = GetLanguage(18020004) -- "已出租"
    elseif self.data == 3 then
        self.nameText.text = GetLanguage(18020005) -- "出租中"
    elseif self.data == 4 then
        self.nameText.text = GetLanguage(18020006) -- "出售中"
    elseif self.data == 5 then
        self.nameText.text = GetLanguage(18020007) -- "可使用"
    end
end

-- 设置类型个数
function LandTitleItem:SetNumber(number)
    if number then
        self.numberText.text = number
    else
        self.numberText.text = "0"
    end
end

-- 设置是否选中，并刷新它的显示
function LandTitleItem:SetSelect(isSelect)
    self.landSelectBtn.interactable = isSelect
    local nameTextV3 = isSelect and LandTitleItem.static.NomalNameColor or LandTitleItem.static.SelectNameColor
    local numberTextV3 = isSelect and LandTitleItem.static.NomalNumberColor or LandTitleItem.static.SelectNumberColor
    local bgV3 = isSelect and LandTitleItem.static.NomalNumberBgColor or LandTitleItem.static.SelectNumberBgColor
    self.nameText.color = getColorByVector3(nameTextV3)
    self.numberText.color = getColorByVector3(numberTextV3)
    self.bgImage.color = getColorByVector3(bgV3)
end

-- 点击向服务器发送查询土地信息的消息，获得所需要的信息，并显示出来
function LandTitleItem:_setContent()
    --self.isSelect = not self.isSelect
    CompanyCtrl.static.companyMgr.landTypeNum = self.data -- self.isSelect and self.data or 0
    self:SetSelect(false)
    DataManager.DetailModelRpcNoRet(OpenModelInsID.CompanyCtrl, 'm_GetGroundInfo')
end