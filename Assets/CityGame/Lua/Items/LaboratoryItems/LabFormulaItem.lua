---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/11/29 18:02
---
LabFormulaItem = class('LabFormulaItem')
LabFormulaItem.static.Red_Color = "#D81F1F"  --红色

function LabFormulaItem:initialize(transform)
    self.transform = transform

    self.itemRects = {}
    local childCount = transform.childCount - 1
    for i = 1, childCount do
        local itemData = {}
        itemData.itemRect = transform:Find("mat0"..i)
        itemData.matImg = itemData.itemRect:Find("matImg"):GetComponent("Image")
        itemData.matCountText = itemData.itemRect:Find("matCountText"):GetComponent("Text")
        self.itemRects[i] = itemData
    end
end
---显示
function LabFormulaItem:showState(datas)
    if #datas ~= #self.itemRect then
        ct.log("cycle_w15_laboratory03", "场景中的item个数与期望显示的个数不一致，或者传入的不是顺序表")
        return
    end

    for i, itemData in pairs(datas) do
        ---测试 默认设置为0
        local haveCount = 0  --通过itemId获取仓库中自己含有的个数
        local showStr
        if haveCount < itemData.matCount then
            showStr = string.format("<color=%s>%d/%d</color>", LabFormulaItem.static.Red_Color, haveCount, itemData.matCount)
        else
            showStr = string.format("%d/%d", haveCount, itemData.matCount)
        end
        self.itemRects[i].matCountText.text = showStr
        --self.itemRects[i].matImg = itemData.matId  --根据id读取图片
    end
end