---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xuyafang.
--- DateTime: 2018/10/10 11:12
---
require('Framework/UI/UIPage')


TestExchangeCtrl = class('TestExchangeCtrl',UIPage)

function TestExchangeCtrl:initialize()
    UIPage.initialize(self, UIType.Normal, UIMode.HideOther, UICollider.None)
    self.itemlist = {}
end

function TestExchangeCtrl:bundleName()
    return "TestExchange"
end

function TestExchangeCtrl:OnCreate(obj)
    UIPage.OnCreate(self, obj)

    self:_initPanelData()
end

function TestExchangeCtrl:Awake(go)
    self.gameObject = go
    self.luaBehaviour = go:GetComponent('LuaBehaviour')
end

function TestExchangeCtrl:Refresh()
    self:_initPanelData()
end

function TestExchangeCtrl:Close()

end

---初始化界面
function TestExchangeCtrl:_initPanelData()

    TestExchangeCtrl.static.mainPanelLuaBehaviour = self.luaBehaviour

    local staticData = {}
    staticData[1] = {text = 001}
    staticData[2] = {text = 002}
    staticData[3] = {text = 003}
    staticData[4] = {text = 004}
    staticData[5] = {text = 005}
    staticData[6] = {text = 006}
    staticData[7] = {text = 007}
    staticData[8] = {text = 008}
    staticData[9] = {text = 009}
    staticData[10] = {text = 010}
    staticData[11] = {text = 011}
    staticData[12] = {text = 012}
    staticData[13] = {text = 013}
    staticData[14] = {text = 014}
    staticData[15] = {text = 015}
    staticData[16] = {text = 016}
    staticData[17] = {text = 017}
    TestExchangeCtrl.static.sourceInfo = staticData

    local loopSource = UnityEngine.UI.LoopScrollDataSource.New()
    loopSource.mProvideData = TestExchangeCtrl.static.ProvideData
    loopSource.mClearData = TestExchangeCtrl.static.ClearData
    TestExchangePanel.loopScroll:ActiveScroll(loopSource, 17);

end

TestExchangeCtrl.static.ProvideData = function(transform, idx)
    idx = idx + 1
    if not TestExchangeCtrl.static.sourceInfo[idx] then
        return
    end

    TestExchangeCtrl.static.sourceInfo[idx].transform = transform
    local item = TestExchangeScrollItemCtrl:new(TestExchangeCtrl.static.sourceInfo[idx], TestExchangeCtrl.static.mainPanelLuaBehaviour)
    --self.itemlist[#self.itemlist+1] = item
end

TestExchangeCtrl.static.ClearData = function(transform)
    --log("cycle_w8_exchange01_loopScroll", "回收"..transform.name)
end
